"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[680],{5934:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>a,frontMatter:()=>l,metadata:()=>c,toc:()=>t});var i=r(4848),d=r(8453);const l={sidebar_position:2},s="ubuntu22.04\u57fa\u672c\u4f7f\u7528",c={id:"ubuntu22.04\u4f7f\u7528",title:"ubuntu22.04\u57fa\u672c\u4f7f\u7528",description:"\u4e00\u3001\u9b54\u4e91\u817e\u4e3b\u673a\u4ecb\u7ecd",source:"@site/docs/ubuntu22.04\u4f7f\u7528.md",sourceDirName:".",slug:"/ubuntu22.04\u4f7f\u7528",permalink:"/myt-doc/docs/ubuntu22.04\u4f7f\u7528",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"\u5ba2\u6237\u7aef",permalink:"/myt-doc/docs/client"}},o={},t=[{value:"\u4e00\u3001\u9b54\u4e91\u817e\u4e3b\u673a\u4ecb\u7ecd",id:"\u4e00\u9b54\u4e91\u817e\u4e3b\u673a\u4ecb\u7ecd",level:2},{value:"\u4e8c\u3001\u7f16\u8bd1ubuntu22.04\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",id:"\u4e8c\u7f16\u8bd1ubuntu2204\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",level:2},{value:"2.1 \u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",id:"21-\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",level:4},{value:"2.2 \u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",id:"22-\u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",level:4},{value:"\u4e00\u3001\u5bf9ubuntu\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7f16\u8bd1",id:"\u4e00\u5bf9ubuntu\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7f16\u8bd1",level:2},{value:"1 \u73af\u5883\u51c6\u5907",id:"1-\u73af\u5883\u51c6\u5907",level:3},{value:"1.1 \u4e0b\u8f7dubuntu base",id:"11-\u4e0b\u8f7dubuntu-base",level:4},{value:"1.2 \u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",id:"12-\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",level:4},{value:"1.3 \u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",id:"13-\u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",level:4},{value:"1.4 \u914d\u7f6e\u6839\u6587\u4ef6\u7cfb\u7edf",id:"14-\u914d\u7f6e\u6839\u6587\u4ef6\u7cfb\u7edf",level:4},{value:"1.5 \u6302\u8f7d\u6839\u6587\u4ef6\u7cfb\u7edf",id:"15-\u6302\u8f7d\u6839\u6587\u4ef6\u7cfb\u7edf",level:4},{value:"2 \u6784\u5efa\u6839\u6587\u4ef6\u7cfb\u7edf",id:"2-\u6784\u5efa\u6839\u6587\u4ef6\u7cfb\u7edf",level:3},{value:"2.1 \u4e3a\u6839\u6587\u4ef6\u7cfb\u7edf\u5b89\u88c5\u5fc5\u8981\u8f6f\u4ef6",id:"21-\u4e3a\u6839\u6587\u4ef6\u7cfb\u7edf\u5b89\u88c5\u5fc5\u8981\u8f6f\u4ef6",level:4},{value:"2.2 \u4fee\u6539root\u7528\u6237\u5bc6\u7801\uff0c\u6dfb\u52a0\u65b0\u7528\u6237",id:"22-\u4fee\u6539root\u7528\u6237\u5bc6\u7801\u6dfb\u52a0\u65b0\u7528\u6237",level:4},{value:"2.3 \u8bbe\u7f6e\u4e3b\u673a\u540d\u548c\u4e3b\u673a\u89e3\u6790",id:"23-\u8bbe\u7f6e\u4e3b\u673a\u540d\u548c\u4e3b\u673a\u89e3\u6790",level:4},{value:"2.4 \u914d\u7f6e\u7f51\u5361",id:"24-\u914d\u7f6e\u7f51\u5361",level:4},{value:"2.5 \u7981\u7528\u7cfb\u7edf\u4f11\u7720",id:"25-\u7981\u7528\u7cfb\u7edf\u4f11\u7720",level:4},{value:"2.6 \u4fee\u6539ssh\u914d\u7f6e\u6587\u4ef6",id:"26-\u4fee\u6539ssh\u914d\u7f6e\u6587\u4ef6",level:4},{value:"2.7\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u6269\u5bb9\u6839\u76ee\u5f55",id:"27\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u6269\u5bb9\u6839\u76ee\u5f55",level:4},{value:"2.8\u5b89\u88c5\u5f00\u53d1\u677f\u9a71\u52a8",id:"28\u5b89\u88c5\u5f00\u53d1\u677f\u9a71\u52a8",level:4},{value:"3 \u6253\u5305\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",id:"3-\u6253\u5305\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",level:3},{value:"3.1\u6253\u5305\u955c\u50cf",id:"31\u6253\u5305\u955c\u50cf",level:4},{value:"3.2 \u70e7\u5f55\u955c\u50cf",id:"32-\u70e7\u5f55\u955c\u50cf",level:4},{value:"\u4e8c\u3001\u8fd0\u884crkllm\u5927\u6a21\u578b",id:"\u4e8c\u8fd0\u884crkllm\u5927\u6a21\u578b",level:2},{value:"1 \u4f7f\u7528SSH\u94fe\u63a5\u8fdb\u9b54\u4e91\u817e\u4e3b\u673a",id:"1-\u4f7f\u7528ssh\u94fe\u63a5\u8fdb\u9b54\u4e91\u817e\u4e3b\u673a",level:3},{value:"2 \u5b89\u88c5docker",id:"2-\u5b89\u88c5docker",level:3},{value:"3 \u5207\u6362\u5230su\u6743\u9650\u4e0b",id:"3-\u5207\u6362\u5230su\u6743\u9650\u4e0b",level:3},{value:"4 \u62c9\u53d6docker\u955c\u50cf\u8fd0\u884crkllm\u5927\u6a21\u578b",id:"4-\u62c9\u53d6docker\u955c\u50cf\u8fd0\u884crkllm\u5927\u6a21\u578b",level:3},{value:"5 \u6253\u5f00\u4e3b\u673aIP+\uff1a8080\u7aef\u53e3\uff0c\u8bbf\u95eedemo\u63a7\u5236\u53f0",id:"5-\u6253\u5f00\u4e3b\u673aip8080\u7aef\u53e3\u8bbf\u95eedemo\u63a7\u5236\u53f0",level:3},{value:"\u4e09\u3001\u8fd0\u884crknn demo",id:"\u4e09\u8fd0\u884crknn-demo",level:2},{value:"1 \u51c6\u5907\u5f00\u53d1\u73af\u5883",id:"1-\u51c6\u5907\u5f00\u53d1\u73af\u5883",level:3},{value:"1.1 \u4e0b\u8f7dRKNN\u76f8\u5173\u4ed3\u5e93",id:"11-\u4e0b\u8f7drknn\u76f8\u5173\u4ed3\u5e93",level:4},{value:"1.2 \u5b89\u88c5 RKNN-Toolkit2 \u73af\u5883",id:"12-\u5b89\u88c5-rknn-toolkit2-\u73af\u5883",level:4},{value:"1.2.1 \u5b89\u88c5 Python",id:"121-\u5b89\u88c5-python",level:5},{value:"1.2.1.1 \u5b89\u88c5 Conda",id:"1211-\u5b89\u88c5-conda",level:6},{value:"1.2.1.2 \u4f7f\u7528 Conda \u521b\u5efa Python \u73af\u5883",id:"1212-\u4f7f\u7528-conda-\u521b\u5efa-python-\u73af\u5883",level:6},{value:"1.2.2 \u5b89\u88c5\u4f9d\u8d56\u5e93\u548c RKNN-Toolkit2",id:"122-\u5b89\u88c5\u4f9d\u8d56\u5e93\u548c-rknn-toolkit2",level:5},{value:"1.2.3 \u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",id:"123-\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",level:5},{value:"1.3\u5b89\u88c5\u7f16\u8bd1\u5de5\u5177",id:"13\u5b89\u88c5\u7f16\u8bd1\u5de5\u5177",level:4},{value:"1.3.1 \u5b89\u88c5 CMake",id:"131-\u5b89\u88c5-cmake",level:5},{value:"1.3.2 \u5b89\u88c5\u7f16\u8bd1\u5668",id:"132-\u5b89\u88c5\u7f16\u8bd1\u5668",level:5},{value:"1.4 \u786e\u8ba4 RKNPU2 \u9a71\u52a8\u7248\u672c",id:"14-\u786e\u8ba4-rknpu2-\u9a71\u52a8\u7248\u672c",level:4},{value:"2 \u8fd0\u884c\u793a\u4f8b\u7a0b\u5e8f",id:"2-\u8fd0\u884c\u793a\u4f8b\u7a0b\u5e8f",level:3},{value:"2.1 RKNN Model Zoo \u4ecb\u7ecd",id:"21-rknn-model-zoo-\u4ecb\u7ecd",level:4},{value:"2.2 RKNN C Demo \u4f7f\u7528\u65b9\u6cd5",id:"22-rknn-c-demo-\u4f7f\u7528\u65b9\u6cd5",level:4},{value:"2.2.1 \u51c6\u5907\u6a21\u578b",id:"221-\u51c6\u5907\u6a21\u578b",level:5},{value:"2.2.2 \u6a21\u578b\u8f6c\u6362",id:"222-\u6a21\u578b\u8f6c\u6362",level:5},{value:"2.2.3 \u8fd0\u884c RKNN C Demo",id:"223-\u8fd0\u884c-rknn-c-demo",level:5},{value:"2.2.3.1 \u7f16\u8bd1",id:"2231-\u7f16\u8bd1",level:6},{value:"2.2.3.2 \u63a8\u9001\u6587\u4ef6\u5230\u9b54\u4e91\u817e\u4e3b\u673a",id:"2232-\u63a8\u9001\u6587\u4ef6\u5230\u9b54\u4e91\u817e\u4e3b\u673a",level:6},{value:"2.2.3.3 \u9b54\u4e91\u817e\u4e3b\u673a\u8fd0\u884cDemo",id:"2233-\u9b54\u4e91\u817e\u4e3b\u673a\u8fd0\u884cdemo",level:6},{value:"2.3.3.4 \u67e5\u770b\u7ed3\u679c",id:"2334-\u67e5\u770b\u7ed3\u679c",level:6},{value:"\u56db\u3001\u8fd0\u884crkmpp demo",id:"\u56db\u8fd0\u884crkmpp-demo",level:2},{value:"1 \u4e0b\u8f7drkmpp",id:"1-\u4e0b\u8f7drkmpp",level:3},{value:"2 \u4ea4\u53c9\u7f16\u8bd1MPP\u5e93",id:"2-\u4ea4\u53c9\u7f16\u8bd1mpp\u5e93",level:3},{value:"3 \u68c0\u67e5\u7f16\u8bd1\u7ed3\u679c",id:"3-\u68c0\u67e5\u7f16\u8bd1\u7ed3\u679c",level:3},{value:"4 \u5b89\u88c5\u5e93\u6587\u4ef6",id:"4-\u5b89\u88c5\u5e93\u6587\u4ef6",level:3},{value:"5 \u8bbe\u7f6e\u6253\u5370\u65e5\u5fd7",id:"5-\u8bbe\u7f6e\u6253\u5370\u65e5\u5fd7",level:3},{value:"6 \u8fd0\u884c\u5e76\u67e5\u770b\u65e5\u5fd7",id:"6-\u8fd0\u884c\u5e76\u67e5\u770b\u65e5\u5fd7",level:3},{value:"\u4e94\u3001\u5b89\u88c5librga\u5e93",id:"\u4e94\u5b89\u88c5librga\u5e93",level:2},{value:"1 \u4e0b\u8f7dlibrga",id:"1-\u4e0b\u8f7dlibrga",level:3},{value:"2 \u79fb\u52a8\u5e93\u6587\u4ef6",id:"2-\u79fb\u52a8\u5e93\u6587\u4ef6",level:3},{value:"3 \u9a8c\u8bc1librga\u662f\u5426\u53ef\u7528",id:"3-\u9a8c\u8bc1librga\u662f\u5426\u53ef\u7528",level:3},{value:"3.1 \u79fb\u52a8\u6d4b\u8bd5\u6587\u4ef6",id:"31-\u79fb\u52a8\u6d4b\u8bd5\u6587\u4ef6",level:4},{value:"3.2 \u8fd0\u884cim2d_api_demo",id:"32-\u8fd0\u884cim2d_api_demo",level:4},{value:"3.2.1 \u5de5\u5177\u94fe\u4fee\u6539",id:"321-\u5de5\u5177\u94fe\u4fee\u6539",level:5},{value:"3.2.2 \u7f16\u8bd1\u811a\u672c\u4fee\u6539",id:"322-\u7f16\u8bd1\u811a\u672c\u4fee\u6539",level:5},{value:"3.2.3 \u6267\u884c\u7f16\u8bd1\u811a\u672c",id:"323-\u6267\u884c\u7f16\u8bd1\u811a\u672c",level:5},{value:"3.2.4 \u8fd0\u884c\u9a8c\u8bc1",id:"324-\u8fd0\u884c\u9a8c\u8bc1",level:5},{value:"\u516d\u3001\u8fd0\u884cjellyfin",id:"\u516d\u8fd0\u884cjellyfin",level:2},{value:"\u5728Linux\u4e3b\u673a\u4e0a\u914d\u7f6e",id:"\u5728linux\u4e3b\u673a\u4e0a\u914d\u7f6e",level:3},{value:"1 \u5b89\u88c5\u6240\u9700\u5b89\u88c5\u5305",id:"1-\u5b89\u88c5\u6240\u9700\u5b89\u88c5\u5305",level:3},{value:"2 \u786e\u4fdd<code>dma_heap</code>\u3001<code>dri</code>\u3001<code>mpp_service</code>\u548c<code>rga</code>\u5b58\u5728\u4e8e<code>/dev</code>\u4e2d",id:"2-\u786e\u4fdddma_heapdrimpp_service\u548crga\u5b58\u5728\u4e8edev\u4e2d",level:3},{value:"3 \u8bbe\u7f6eudev\u89c4\u5219\u6587\u4ef6",id:"3-\u8bbe\u7f6eudev\u89c4\u5219\u6587\u4ef6",level:3},{value:"4 \u6dfb\u52a0\u7528\u6237",id:"4-\u6dfb\u52a0\u7528\u6237",level:3},{value:"5 \u5728\u4e3b\u673a\u4e0a\u5b89\u88c5 ARM Mali OpenCL \u8fd0\u884c\u65f6 \uff08libmali\uff09\uff1a",id:"5-\u5728\u4e3b\u673a\u4e0a\u5b89\u88c5-arm-mali-opencl-\u8fd0\u884c\u65f6-libmali",level:3},{value:"6 \u68c0\u67e5OpenCL\u8fd0\u884c\u65f6\u72b6\u6001",id:"6-\u68c0\u67e5opencl\u8fd0\u884c\u65f6\u72b6\u6001",level:3},{value:"7 \u8bbe\u7f6ejellyfin",id:"7-\u8bbe\u7f6ejellyfin",level:3},{value:"7.1\u767b\u5f55jellyfin\u5ba2\u6237\u7aef",id:"71\u767b\u5f55jellyfin\u5ba2\u6237\u7aef",level:4},{value:"7.2 \u8bbe\u7f6e",id:"72-\u8bbe\u7f6e",level:4},{value:"8 \u5728linux\u4e0a\u9a8c\u8bc1",id:"8-\u5728linux\u4e0a\u9a8c\u8bc1",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ubuntu2204\u57fa\u672c\u4f7f\u7528",children:"ubuntu22.04\u57fa\u672c\u4f7f\u7528"}),"\n",(0,i.jsx)(n.h2,{id:"\u4e00\u9b54\u4e91\u817e\u4e3b\u673a\u4ecb\u7ecd",children:"\u4e00\u3001\u9b54\u4e91\u817e\u4e3b\u673a\u4ecb\u7ecd"}),"\n",(0,i.jsx)(n.h2,{id:"\u4e8c\u7f16\u8bd1ubuntu2204\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",children:"\u4e8c\u3001\u7f16\u8bd1ubuntu22.04\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf"}),"\n",(0,i.jsx)(n.h4,{id:"21-\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",children:"2.1 \u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6\r\nsudo apt-get install git ssh make gcc libssl-dev liblz4-tool  expect g++ patchelf chrpath gawk texinfo chrpath diffstat binfmt-support qemu-user-static live-build bison flex fakeroot cmake gcc-multilib g++-multilib unzip device-tree-compiler ncurses-dev  python-is-python3 python-dev-is-python3 -y \n"})}),"\n",(0,i.jsx)(n.h4,{id:"22-\u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",children:"2.2 \u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u5728SDK\u4e2d\u76f4\u63a5\u8fd0\u884c",(0,i.jsx)(n.code,{children:"build_ubuntu.sh"}),"\u811a\u672c \u53ef\u76f4\u63a5\u5c06ubuntu22.04\u6587\u4ef6\u7cfb\u7edf\u7f16\u8bd1\u5b8c\u6210\uff0c\u5982\u679c\u9700\u8981\u81ea\u884c\u7f16\u8f91\u5185\u6838\u6a21\u5757\u8bf7\u53c2\u7167",(0,i.jsx)(n.a,{href:"#2.8%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E6%9D%BF%E9%A9%B1%E5%8A%A8",children:"2.8\u5b89\u88c5\u5f00\u53d1\u677f\u9a71\u52a8"}),"\u8fdb\u884c\u5185\u5bb9\u7684\u4fee\u6539"]}),"\n",(0,i.jsx)(n.h1,{id:"\u6309\u9700\u5236\u5b9a\u6587\u4ef6\u7cfb\u7edf",children:"\u6309\u9700\u5236\u5b9a\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.h2,{id:"\u4e00\u5bf9ubuntu\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7f16\u8bd1",children:"\u4e00\u3001\u5bf9ubuntu\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7f16\u8bd1"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u73af\u5883\u51c6\u5907",children:"1 \u73af\u5883\u51c6\u5907"}),"\n",(0,i.jsx)(n.h4,{id:"11-\u4e0b\u8f7dubuntu-base",children:"1.1 \u4e0b\u8f7dubuntu base"}),"\n",(0,i.jsxs)(n.p,{children:["\u6b64\u5904\u4f7f\u7528",(0,i.jsx)(n.a,{href:"https://mirrors.bfsu.edu.cn/ubuntu-cdimage/ubuntu-base/releases",children:"\u5317\u4eac\u5916\u56fd\u8bed\u5927\u5b66\u955c\u50cf\u7ad9"}),"\u52a0\u901f\u4e0b\u8f7d\uff0c\u6ce8\u610f\u9009\u62e9\u6839\u636e\u5f00\u53d1\u677f\u67b6\u6784\u9009\u62e9arm64\u6216\u5176\u4ed6\u67b6\u6784\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget https://mirrors.bfsu.edu.cn/ubuntu-cdimage/ubuntu-base/releases/22.04.2/release/ubuntu-base-22.04.2-base-arm64.tar.gz\n"})}),"\n",(0,i.jsx)(n.h4,{id:"12-\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6",children:"1.2 \u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6\r\nsudo apt-get install git ssh make gcc libssl-dev liblz4-tool  expect g++ patchelf chrpath gawk texinfo chrpath diffstat binfmt-support qemu-user-static live-build bison flex fakeroot cmake gcc-multilib g++-multilib unzip device-tree-compiler ncurses-dev  python-is-python3 python-dev-is-python3 -y \n"})}),"\n",(0,i.jsx)(n.h4,{id:"13-\u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf",children:"1.3 \u89e3\u538b\u6839\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u5b58\u653e\u6839\u6587\u4ef6\u7cfb\u7edf\r\nmkdir ubuntu_rootfs\r\n# \u89e3\u538b\u5230\u6587\u4ef6\u5939\r\nsudo tar -xvf ubuntu-base-22.04-base-arm64.tar.gz -C ubuntu_rootfs/\n"})}),"\n",(0,i.jsx)(n.h4,{id:"14-\u914d\u7f6e\u6839\u6587\u4ef6\u7cfb\u7edf",children:"1.4 \u914d\u7f6e\u6839\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsx)(n.p,{children:"1.\u914d\u7f6e\u6839\u6587\u4ef6\u7cfb\u7edf\u7684\u7f51\u7edc\u3001\u8f6f\u4ef6\u6e90\u7b49"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# \u914d\u7f6e\u7f51\u7edc\uff0c\u590d\u5236\u672c\u673a resolv.conf \u6587\u4ef6\r\nsudo cp /etc/resolv.conf <SDK>/ubuntu_rootfs/etc/resolv.conf\r\nsudo echo "nameserver 8.8.8.8" >> <SDK>/ubuntu_rootfs/etc/resolv.conf\r\nsudo echo "nameserver 114.114.114.114" >> <SDK>/ubuntu_rootfs/etc/resolv.conf\n'})}),"\n",(0,i.jsx)(n.p,{children:"2.\u66f4\u6362\u8f6f\u4ef6\u6e90\uff0c\u6b64\u5904\u9009\u62e9\u5317\u4eac\u5916\u56fd\u8bed\u5927\u5b66\u955c\u50cf\u7ad9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u7f16\u8f91\u6839\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u8f6f\u4ef6\u6e90\u914d\u7f6e\u6587\u4ef6\r\nsudo vim <SDK>/ubuntu_rootfs/etc/apt/sources.list\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662fUbuntu 22.04 \u7248\u672c\u7684\u955c\u50cf\uff0c\u8bf7\u6ce8\u610f\u5220\u9664\u6839\u6587\u4ef6\u7cfb\u7edf ",(0,i.jsx)(n.code,{children:"<SDK>/ubuntu_rootfs/etc/apt/sources.list"})," \u6587\u4ef6\u4e2d\u539f\u6709\u7684\u5185\u5bb9\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u9ed8\u8ba4\u6ce8\u91ca\u4e86\u6e90\u7801\u955c\u50cf\u4ee5\u63d0\u9ad8 apt update \u901f\u5ea6\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u53d6\u6d88\u6ce8\u91ca\r\ndeb http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse\r\n# deb-src http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse\r\ndeb http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse\r\n# deb-src http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse\r\ndeb http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse\r\n# deb-src http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse\r\n\r\n# deb http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-security main restricted universe multiverse\r\n# # deb-src http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-security main restricted universe multiverse\r\n\r\ndeb http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse\r\n# deb-src http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse\r\n\r\n# \u9884\u53d1\u5e03\u8f6f\u4ef6\u6e90\uff0c\u4e0d\u5efa\u8bae\u542f\u7528\r\n# deb http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse\r\n# # deb-src http://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse\n"})}),"\n",(0,i.jsx)(n.p,{children:"3.\u914d\u7f6e\u4eff\u771f\u5f00\u53d1\u677f\u8fd0\u884c\u73af\u5883"}),"\n",(0,i.jsxs)(n.p,{children:["X86 \u67b6\u6784\u4e0b\u7684Ubuntu \u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u652f\u6301Arm\u67b6\u6784\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5 ",(0,i.jsx)(n.code,{children:"qemu-user-static"})," \u5b9e\u73b0\u4eff\u771f\u8fd0\u884c\uff0c\u4ece\u800c\u6784\u5efa ubuntu \u6587\u4ef6\u7cfb\u7edf\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u62f7\u8d1d qemu-aarch64-static \u5230 ubuntu_rootfs/usr/bin/ \u76ee\u5f55\u4e0b\u3002\r\nsudo cp /usr/bin/qemu-aarch64-static <SDK>/ubuntu_rootfs/usr/bin/\n"})}),"\n",(0,i.jsx)(n.h4,{id:"15-\u6302\u8f7d\u6839\u6587\u4ef6\u7cfb\u7edf",children:"1.5 \u6302\u8f7d\u6839\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsx)(n.p,{children:"\u9996\u5148\u7f16\u5199\u6302\u8f7d\u811a\u672c mount.sh\uff0c\u7528\u4e8e\u6302\u8f7d\u6839\u6587\u4ef6\u7cfb\u7edf\u8fd0\u884c\u6240\u9700\u8981\u7684\u8bbe\u5907\u548c\u76ee\u5f55\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#!/bin/bash\r\nmnt() {\r\n\techo "MOUNTING"\r\n\tsudo mount -t proc /proc ${2}proc\r\n\tsudo mount -t sysfs /sys ${2}sys\r\n\tsudo mount -o bind /dev ${2}dev\r\n\tsudo mount -o bind /dev/pts ${2}dev/pts\r\n\t# sudo chroot ${2}\r\n}\r\numnt() {\r\n\techo "UNMOUNTING"\r\n\tsudo umount ${2}proc\r\n\tsudo umount ${2}sys\r\n\tsudo umount ${2}dev/pts\r\n\tsudo umount ${2}dev\r\n}\r\n \r\nif [ "$1" == "-m" ] && [ -n "$2" ] ;\r\nthen\r\n\tmnt $1 $2\r\nelif [ "$1" == "-u" ] && [ -n "$2" ];\r\nthen\r\n\tumnt $1 $2\r\nelse\r\n\techo ""\r\n\techo "Either 1\'st, 2\'nd or both parameters were missing"\r\n\techo ""\r\n\techo "1\'st parameter can be one of these: -m(mount) OR -u(umount)"\r\n\techo "2\'nd parameter is the full path of rootfs directory(with trailing \'/\')"\r\n\techo ""\r\n\techo "For example: ch-mount -m /media/sdcard/"\r\n\techo ""\r\n\techo 1st parameter : ${1}\r\n\techo 2nd parameter : ${2}\r\nfi\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4fdd\u5b58\u9000\u51fa\u540e\u7ed9\u811a\u672c\u589e\u52a0\u6267\u884c\u6743\u9650\uff0c\u5e76\u6302\u8f7d"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u589e\u52a0\u811a\u672c\u6267\u884c\u6743\u9650\r\nsudo chmod +x mount.sh\r\n# \u6302\u8f7d\u6587\u4ef6\u7cfb\u7edf\r\n./mount.sh -m ubuntu_rootfs/\r\n# \u8fdb\u5165\u6839\u6587\u4ef6\u7cfb\u7edf\r\nsudo chroot ubuntu_rootfs/\n"})}),"\n",(0,i.jsx)(n.p,{children:"==\u5728\u540e\u7eed\u5b8c\u6210\u6839\u6587\u4ef6\u7cfb\u7edf\u6784\u5efa\uff0c\u5e76\u9000\u51fa\u540e\uff0c\u5fc5\u987b\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\uff0c\u5426\u5219\u540e\u7eed\u5728\u6784\u9020\u955c\u50cf\u65f6\u4f1a\u62a5\u9519\uff01\uff01\uff01=="}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\r\n./mount.sh -u ubuntu_rootfs/\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u6784\u5efa\u6839\u6587\u4ef6\u7cfb\u7edf",children:"2 \u6784\u5efa\u6839\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.h4,{id:"21-\u4e3a\u6839\u6587\u4ef6\u7cfb\u7edf\u5b89\u88c5\u5fc5\u8981\u8f6f\u4ef6",children:"2.1 \u4e3a\u6839\u6587\u4ef6\u7cfb\u7edf\u5b89\u88c5\u5fc5\u8981\u8f6f\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:"\u6b64\u5904\u8bf7\u786e\u4fdd\u4f60\u6784\u5efa\u6839\u6587\u4ef6\u7cfb\u7edf\u7684\u73af\u5883\u6709\u7f51\u7edc\u8fde\u63a5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u66f4\u65b0\u8f6f\u4ef6\r\napt update\r\napt upgrade -y\r\nmv /var/lib/dpkg/info/ /var/lib/dpkg/info_old/\r\nmkdir /var/lib/dpkg/info\r\napt-get update\r\napt-get install\r\n# \u5fc5\u8981\u5de5\u5177\r\napt install vim bash-completion net-tools iputils-ping ifupdown ethtool ssh rsync udev htop rsyslog curl openssh-server apt-utils dialog nfs-common psmisc language-pack-en-base sudo kmod apt-transport-https gcc g++ make cmake fdisk -y\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0b\u5185\u5bb9\u53ef\u9009\u62e9\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u5f00\u53d1\u5de5\u5177\r\napt install ninja-build build-essential ffmpeg libopencv-dev libv4l-dev v4l-utils yavta  -y\n"})}),"\n",(0,i.jsx)(n.h4,{id:"22-\u4fee\u6539root\u7528\u6237\u5bc6\u7801\u6dfb\u52a0\u65b0\u7528\u6237",children:"2.2 \u4fee\u6539root\u7528\u6237\u5bc6\u7801\uff0c\u6dfb\u52a0\u65b0\u7528\u6237"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u4fee\u6539 root \u5bc6\u7801\r\npasswd root\r\n# \u6dfb\u52a0\u65b0\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801\r\nadduser myt\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4fee\u6539/etc/sudoers\u6587\u4ef6\uff0c\u7528\u4e8e\u63a7\u5236\u54ea\u4e9b\u7528\u6237\u53ef\u4ee5\u4ee5\u8d85\u7ea7\u7ba1\u7406\u5458\u8eab\u4efd\u4f7f\u7528root\u6743\u9650\u8fdb\u884c\u547d\u4ee4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u7f16\u8f91 /etc/sudoers \r\nvim /etc/sudoers\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"myt      ALL=(ALL:ALL) ALL\n"})}),"\n",(0,i.jsx)(n.h4,{id:"23-\u8bbe\u7f6e\u4e3b\u673a\u540d\u548c\u4e3b\u673a\u89e3\u6790",children:"2.3 \u8bbe\u7f6e\u4e3b\u673a\u540d\u548c\u4e3b\u673a\u89e3\u6790"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# \u4e3b\u673a\u540d\r\necho "RK3588" > /etc/hostname\r\n# \u4e3b\u673a IP\r\necho "127.0.0.1 localhost" >> /etc/hosts\r\necho "127.0.0.1 RK3588" >> /etc/hosts\r\necho "127.0.0.1 localhost RK3588" >> /etc/hosts\n'})}),"\n",(0,i.jsx)(n.h4,{id:"24-\u914d\u7f6e\u7f51\u5361",children:"2.4 \u914d\u7f6e\u7f51\u5361"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#\u4e0b\u8f7dnetwork-manager\r\napt-get install network-manager\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u5b89\u88c5 network-manager\u65f6\u9700\u8981\u9009\u62e9\u65f6\u533a\uff0c\u8bf7\u6839\u636e\u9700\u8981\u81ea\u52a8\u9009\u62e9"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CLocal%5CTemp%5C%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17307932086628.png",alt:"\u4f01\u4e1a\u5fae\u4fe1\u622a\u56fe_17307932086628"})}),"\n",(0,i.jsx)(n.p,{children:"Network-Manager \u670d\u52a1\u4f1a\u81ea\u52a8\u914d\u7f6e\u7f51\u5361,\u4f46\u662f\u5176\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u5c06 Ethernet \u52a0\u5165\u4e86\u9ed1\u540d\u5355\uff0c\u4f1a\u5bfc\u81f4 Ubuntu \u63d0\u793a unmanned\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u7f16\u8f91\u6587\u4ef6\r\nvim /usr/lib/NetworkManager/conf.d/10-globally-managed-devices.conf\r\n# \u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u4e3a\r\n[keyfile]\r\nunmanaged-devices=*,except:type:ethernet,except:type:wifi,except:type:gsm,except:type:cdma\n"})}),"\n",(0,i.jsx)(n.p,{children:"RK3588\u5f00\u53d1\u677f\u6709\u4e24\u5757\u7f51\u5361\uff0c\u56e0\u6b64\u5c06\u4e24\u5757\u7f51\u5361\u9ed8\u8ba4\u914d\u7f6e\u4e3a\u81ea\u52a8DHCP\u83b7\u53d6\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# \u7f51\u53610\r\necho "auto eth0" > /etc/network/interfaces.d/eth0\r\necho "iface eth0 inet dhcp" >> /etc/network/interfaces.d/eth0\r\n# \u7f51\u53611\r\necho "auto eth1" > /etc/network/interfaces.d/eth1\r\necho "iface eth1 inet dhcp" >> /etc/network/interfaces.d/eth1\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u5b9e\u9645\u6d4b\u8bd5\u4e2d\u7f51\u53e3\u5fc5\u987b\u63a5\u5165\u7f51\u7ebf\u7cfb\u7edf\u624d\u80fd\u6b63\u5e38\u542f\u52a8\uff0c\u5c31\u662f\u5728\u4e0d\u8054\u7f51\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u6b21\u5f00\u673a\u90fd\u8981\u7b49\u5f85\u5f88\u4e45\uff0c\u5361\u5728\u7f51\u7edc\u8fde\u63a5\u4e0a5\u5206\u949f\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u4fee\u6539\u4e0b\u9762\u8fd9\u4e2a\u6587\u4ef6\r\nvim /lib/systemd/system/networking.service\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5c06\u91cc\u9762\u7684TimeoutStartSec=5min \u4fee\u6539\u4e3a\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"TimeoutStartSec=5sec\n"})}),"\n",(0,i.jsx)(n.h4,{id:"25-\u7981\u7528\u7cfb\u7edf\u4f11\u7720",children:"2.5 \u7981\u7528\u7cfb\u7edf\u4f11\u7720"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8bbe\u7f6e\u7981\u6b62\u4f11\u7720\r\nsystemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target\r\n# \u67e5\u770b\u4f11\u7720\u72b6\u6001\r\nsystemctl status sleep.target\n"})}),"\n",(0,i.jsx)(n.h4,{id:"26-\u4fee\u6539ssh\u914d\u7f6e\u6587\u4ef6",children:"2.6 \u4fee\u6539ssh\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,i.jsxs)(n.p,{children:["1.\u914d\u7f6e",(0,i.jsx)(n.code,{children:"ssh_config"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ sudo vim /etc/ssh/ssh_config\t\t\t\t\r\n# \u53bb\u6389PasswordAuthentication yes\u524d\u9762\u7684"#"\u53f7\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031115511303.png",alt:"image-20241031115511303"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u914d\u7f6esshd_config"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ sudo vim /etc/ssh/sshd_config\t\r\n\t\t\t\r\n# \u5728PermitRootLogin prohibit-password\u8fd9\u884c\u884c\u9996\u52a0\u4e0a"#"\r\n# \u5728\u6b64\u884c\u4e0b\u9762\u6dfb\u52a0\u65b0\u4e00\u884c\r\nPermitRootLogin yes\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031115739313.png",alt:"image-20241031115739313"})}),"\n",(0,i.jsx)(n.h4,{id:"27\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u6269\u5bb9\u6839\u76ee\u5f55",children:"2.7\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u6269\u5bb9\u6839\u76ee\u5f55"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.code,{children:"/usr/local/bin"}),"\u76ee\u5f55\u4e0b\u521b\u5efa",(0,i.jsx)(n.code,{children:"autoexpand.sh"}),"\u811a\u672c"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vim autoexpand.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u811a\u672c\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#!/bin/bash\r\n\r\nROOT_PARTITION=$(lsblk | grep "/$" | awk \'{print $1}\'| sed \'s/^..//\')\r\nDEVICE=${ROOT_PARTITION%p*}\r\nROOT_DIR=/dev/${ROOT_PARTITION}\r\nNUM="${ROOT_PARTITION: -1}"\r\n\r\necho -e "\\n" | parted /dev/${DEVICE} resizepart ${NUM}\r\necho -e "\\n" | resize2fs ${ROOT_DIR}\r\n\r\necho \'\u6269\u5bb9\u6839\u76ee\u5f55\u5df2\u5b8c\u6210\'\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u7ed9\u4e88\u811a\u672c\u53ef\u6267\u884c\u6743\u9650"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo chmod +x autoexpand.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efasystemd\u670d\u52a1"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.code,{children:"/ect/systemd/system/"}),"\u4e0b\u521b\u5efa",(0,i.jsx)(n.code,{children:"autoexpand.service"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[Unit]\r\nDescription=Run My Script Once at Boot\r\n\r\n[Service]\r\nType=oneshot\r\nExecStart=/bin/bash -c 'if [ ! -f /tmp/auto_expand_done ]; then /usr/local/bin/autoexpand.sh; touch /tmp/auto_expand_done; fi'\r\n\r\n[Install]\r\nWantedBy=multi-user.target\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u542f\u7528\u6b64\u670d\u52a1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo systemctl enable autoexpand.service\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u70e7\u5f55\u540e\uff0c\u6839\u76ee\u5f55\u5c06\u81ea\u52a8\u6269\u5bb9\u5230\u6700\u5927"}),"\n",(0,i.jsx)(n.h4,{id:"28\u5b89\u88c5\u5f00\u53d1\u677f\u9a71\u52a8",children:"2.8\u5b89\u88c5\u5f00\u53d1\u677f\u9a71\u52a8"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728SDK\u76ee\u5f55\u4e0b\u8fd0\u884c",(0,i.jsx)(n.code,{children:"./build.sh menuconfig  "})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6253\u5f00",(0,i.jsx)(n.code,{children:"Kernel(Kernel (Embedded in an Android-style boot image)"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.code,{children:"defconfig fragments"})," \u4e2d\u6dfb\u52a0",(0,i.jsx)(n.code,{children:"rockchip_linux_docker.config"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031103309507.png",alt:"image-20241031103309507"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u81ea\u5df1\u6240\u9700\u7684\u9a71\u52a8\u6216\u5185\u6838\u6a21\u5757\u5728kernel\u4e2d\u4fee\u6539",(0,i.jsx)(n.code,{children:"<SDK>/kernel/arch/arm64/configs"}),"\u76ee\u5f55\u4e0b\u7684"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rockchip_linux_deconfig"}),"\u6216\u8005",(0,i.jsx)(n.code,{children:"rockchip_linux_docker.config"})]}),"\n",(0,i.jsx)(n.p,{children:"\u4fee\u6539\u5b8c\u6210\u540e\u7f16\u8bd1kernel\u6765\u83b7\u53d6\u9a71\u52a8\u6a21\u5757"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u5728SDK\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u547d\u4ee4\uff0c\u751f\u6210\u9a71\u52a8\u6587\u4ef6\r\n./build.sh kernel\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u7f16\u8bd1\u7684\u6a21\u5757\u5728",(0,i.jsx)(n.code,{children:"<SDK>/output/kernel-modules/lib"}),"\u76ee\u5f55\u4e0b\u5c06\u6b64",(0,i.jsx)(n.code,{children:"modlues"}),"\u76ee\u5f55\u590d\u5236\u5230",(0,i.jsx)(n.code,{children:"<SDK>/ubuntu_roofs/lib"}),"\u4e0b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cp -r <SDK>/output/kernel-modules/lib/modlues <SDK>/ubuntu_roofs/lib\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u6253\u5305\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf",children:"3 \u6253\u5305\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf"}),"\n",(0,i.jsx)(n.h4,{id:"31\u6253\u5305\u955c\u50cf",children:"3.1\u6253\u5305\u955c\u50cf"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528SDK\u76ee\u5f55\u4e0b",(0,i.jsx)(n.code,{children:"mk-image.sh"}),"\u811a\u672c\u6253\u5305"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u6253\u5305\r\nsudo ./mk-image.sh\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"mk-image.sh"}),"\u811a\u672c\u5185\u5bb9\u5982\u4e0b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#!/bin/bash -e # \u4f7f\u7528bash\u89e3\u91ca\u5668\uff0c\u5e76\u5f00\u542f\u9519\u8bef\u68c0\u67e5\u6a21\u5f0f\r\n\r\nTARGET_ROOTFS_DIR=./ubuntu_rootfs # \u5b9a\u4e49\u76ee\u6807\u6839\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u8def\u5f84\r\nROOTFSIMAGE=ubuntu-rootfs.img # \u5b9a\u4e49\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u540d\r\nEXTRA_SIZE_MB=300 # \u5b9a\u4e49\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\r\nIMAGE_SIZE_MB=$(( $(sudo du -sh -m ${TARGET_ROOTFS_DIR} | cut -f1) + ${EXTRA_SIZE_MB} )) # \u8ba1\u7b97\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u5927\u5c0f\r\n\r\necho Making rootfs! # \u8f93\u51fa\u63d0\u793a\u4fe1\u606f\r\n\r\nif [ -e ${ROOTFSIMAGE} ]; then # \u5982\u679c\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u5220\u9664\r\nrm ${ROOTFSIMAGE}\r\nfi\r\n\r\ndd if=/dev/zero of=${ROOTFSIMAGE} bs=1M count=0 seek=${IMAGE_SIZE_MB} # \u521b\u5efa\u6307\u5b9a\u5927\u5c0f\u7684\u7a7a\u767d\u955c\u50cf\u6587\u4ef6\r\n\r\nsudo mkfs.ext4 -d ${TARGET_ROOTFS_DIR} ${ROOTFSIMAGE} # \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u521b\u5efaext4\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u5c06\u5176\u5199\u5165\u5230\u955c\u50cf\u6587\u4ef6\u4e2d\r\n\r\necho Rootfs Image: ${ROOTFSIMAGE} # \u8f93\u51fa\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u540d\n"})}),"\n",(0,i.jsx)(n.h4,{id:"32-\u70e7\u5f55\u955c\u50cf",children:"3.2 \u70e7\u5f55\u955c\u50cf"}),"\n",(0,i.jsxs)(n.p,{children:["\u6253\u5305\u955c\u50cf\u5b8c\u6210\u540e\uff0c\u4f1a\u751f\u6210 ",(0,i.jsx)(n.code,{children:"ubuntu-rootfs.img"})," \u6587\u4ef6\uff0c\u4f7f\u7528\u8be5\u6587\u4ef6\u70e7\u5f55\u8fdb\u5f00\u53d1\u677f\u5373\u53ef\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6309\u9700\u4fee\u6539parameter\u6587\u4ef6\uff0c\u6765\u4fee\u6539rootfs\u7684\u5730\u5740\u548c\u5927\u5c0f\uff08\u6b64\u5904\u4fee\u6539rootfs\u7684\u5927\u5c0f\u4e0d\u53ef\u5c0f\u4e8e ",(0,i.jsx)(n.code,{children:"ubuntu-rootfs.img"})," \u6587\u4ef6\u5927\u5c0f\uff09"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"FIRMWARE_VER: 1.0\r\nMACHINE_MODEL: RK3588\r\nMACHINE_ID: 007\r\nMANUFACTURER: RK3588\r\nMAGIC: 0x5041524B\r\nATAG: 0x00200800\r\nMACHINE: 0xffffffff\r\nCHECK_MASK: 0x80\r\nPWR_HLD: 0,0,A,0,1\r\nTYPE: GPT\r\nGROW_ALIGN: 0\r\nCMDLINE:mtdparts=:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(boot),0x00040000@0x00028000(recovery),0x00b00000@0x00078000(rootfs),0x00040000@0x00b78000(oem),-@0x00e80000(userdata:grow)\r\nuuid:rootfs=614e0000-0000-4b53-8000-1d28000054a9\r\nuuid:rootfs=614e0000-0000-4b53-8000-1d28000054a9\r\nuuid:boot=7A3F0000-0000-446A-8000-702F00006273\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4e8c\u8fd0\u884crkllm\u5927\u6a21\u578b",children:"\u4e8c\u3001\u8fd0\u884crkllm\u5927\u6a21\u578b"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u4f7f\u7528ssh\u94fe\u63a5\u8fdb\u9b54\u4e91\u817e\u4e3b\u673a",children:"1 \u4f7f\u7528SSH\u94fe\u63a5\u8fdb\u9b54\u4e91\u817e\u4e3b\u673a"}),"\n",(0,i.jsx)(n.p,{children:"\u63a5\u5165usb\u63a5\u53e3\uff0c\u4f7f\u7528\u4e32\u53e3\u67e5\u770b\u4e3b\u673a\u5185\u5bb9\uff0c\u4f7f\u7528\u521a\u624d\u8bbe\u7f6e\u7684\u7528\u6237\u540d\uff0c\u4ee5\u53ca\u5bc6\u7801\u767b\u5f55ubuntu\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u67e5\u770b\u9b54\u4e91\u817e\u4e3b\u673aip"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ifconfig\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031122047091.png",alt:"image-20241031122047091"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:" ssh <username>@<ip>                                    #username\u4e3a\u7528\u6237\u540d\uff0cip\u4e3a\u521a\u624d\u67e5\u770b\u7684ip\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u5165\u5bc6\u7801\u540e\u53ef\u76f4\u63a5\u94fe\u63a5\u8fdb\u5165"}),"\n",(0,i.jsx)(n.h3,{id:"2-\u5b89\u88c5docker",children:"2 \u5b89\u88c5docker"}),"\n",(0,i.jsx)(n.p,{children:"\u68c0\u67e5\u5378\u8f7d\u8001\u7248\u672cDocker"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt-get remove docker docker-engine docker.io containerd runc\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u66f4\u65b0\u8f6f\u4ef6\u5305"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt-get update\r\nsudo apt-get upgrade -y\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5docker\u4f9d\u8d56"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt-get install ca-certificates curl gnupg lsb-release -y\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6dfb\u52a0docker\u5bc6\u94a5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6dfb\u52a0\u963f\u91cc\u4e91docker\u8f6f\u4ef6\u6e90"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'sudo apt install software-properties-common -y\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\nsudo apt update\r\nsudo apt-get update\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5docker"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"apt-get install docker-ce docker-ce-cli containerd.i -y\n"})}),"\n",(0,i.jsx)(n.p,{children:"ubuntu 22.04\u9ed8\u8ba4\u4f7f\u7528nftables\u4f5c\u4e3a\u9632\u706b\u5899\uff0c\u800c\u975eiptables\u3002\u6b64\u5904\u9700\u8981\u5c06nfttables\u6539\u4e3aiptables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo update-alternatives --set iptables /usr/sbin/iptables-legacy\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u6e05\u534e\u5927\u5b66\u7684docker\u955c\u50cf\u6e90"}),"\n",(0,i.jsxs)(n.p,{children:["\u6253\u5f00 Docker \u7684\u914d\u7f6e\u6587\u4ef6 ",(0,i.jsx)(n.code,{children:"/etc/docker/daemon.json"}),"\uff08\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u9700\u8981\u521b\u5efa\uff09\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\r\n  "registry-mirrors": ["https://docker.mirrors.tuna.tsinghua.edu.cn"]\r\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:""}),"\n",(0,i.jsx)(n.h3,{id:"3-\u5207\u6362\u5230su\u6743\u9650\u4e0b",children:"3 \u5207\u6362\u5230su\u6743\u9650\u4e0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"su\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u5165\u5bc6\u7801\uff0c\u5207\u6362\u5230su\u6743\u9650\u4e0b\uff08ubuntu\u7cfb\u7edf\u4e0b\u8f93\u5165\u5bc6\u7801\u65f6\u5e76\u65e0\u4efb\u4f55\u63d0\u793a\uff0c\u8f93\u5165\u5bc6\u7801\u540e\u76f4\u63a5\u56de\u8f66\u5373\u53ef\uff09"}),"\n",(0,i.jsx)(n.h3,{id:"4-\u62c9\u53d6docker\u955c\u50cf\u8fd0\u884crkllm\u5927\u6a21\u578b",children:"4 \u62c9\u53d6docker\u955c\u50cf\u8fd0\u884crkllm\u5927\u6a21\u578b"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docker run -itd --pull=always -v /dev/mali0:/dev/mali0 \\\r\n--device /dev/dri -p 8080:8080 --cap-add=CAP_SYS_ADMIN \\\r\n--device /dev/mali0 --name rkllm \\\r\nregistry.cn-hangzhou.aliyuncs.com/mytrkllm/mytllm:v2-20240614 \\\r\n/root/run.sh\n"})}),"\n",(0,i.jsxs)(n.p,{children:["==\u8bf7\u786e\u4fdd",(0,i.jsx)(n.code,{children:"g610"}),"\u7248\u672c\u517c\u5bb9\uff0c\u4e14\u786e\u4fdd",(0,i.jsx)(n.code,{children:"/usr/lib/firmware"}),"\u76ee\u5f55\u4e0b\u6709",(0,i.jsx)(n.code,{children:"mali_csffw.bin"}),"\u56fa\u4ef6==\uff0c\u5426\u5219\u8fd0\u884c\u65f6\u4f1a\u51fa\u73b0\u56fa\u4ef6\u62a5\u9519"]}),"\n",(0,i.jsx)(n.h3,{id:"5-\u6253\u5f00\u4e3b\u673aip8080\u7aef\u53e3\u8bbf\u95eedemo\u63a7\u5236\u53f0",children:"5 \u6253\u5f00\u4e3b\u673aIP+\uff1a8080\u7aef\u53e3\uff0c\u8bbf\u95eedemo\u63a7\u5236\u53f0"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031162051646.png",alt:"image-20241031162051646"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4e09\u8fd0\u884crknn-demo",children:"\u4e09\u3001\u8fd0\u884crknn demo"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsxs)(n.p,{children:["\uff08\u6b64\u5904\u9700\u8981\u4e24\u4e2a\u4e0d\u540c\u67b6\u6784\u7684Linux\u73af\u5883",(0,i.jsx)(n.code,{children:"x86_64"}),"\u548c",(0,i.jsx)(n.code,{children:"aarch64"}),"\uff08\u9b54\u4e91\u817e\u4e3b\u673a\u67b6\u6784\uff09\uff0c\u8bf7\u4ed4\u7ec6\u770b\u6b64\u6587\u6863\u5185\u5bb9\uff09"]}),"\n",(0,i.jsx)(n.h3,{id:"1-\u51c6\u5907\u5f00\u53d1\u73af\u5883",children:"1 \u51c6\u5907\u5f00\u53d1\u73af\u5883"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0b\u8f7d ",(0,i.jsx)(n.code,{children:"RKNN"})," \u76f8\u5173\u4ed3\u5e93"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b89\u88c5",(0,i.jsx)(n.code,{children:"RKNN-Toolkit2"})," \u73af\u5883"]}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5\u7f16\u8bd1\u5de5\u5177"}),"\n",(0,i.jsxs)(n.p,{children:["\u68c0\u67e5 ",(0,i.jsx)(n.code,{children:"RKNPU2"})," \u73af\u5883"]}),"\n",(0,i.jsx)(n.h4,{id:"11-\u4e0b\u8f7drknn\u76f8\u5173\u4ed3\u5e93",children:"1.1 \u4e0b\u8f7dRKNN\u76f8\u5173\u4ed3\u5e93"}),"\n",(0,i.jsxs)(n.p,{children:["\u5efa\u8bae\u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55\u7528\u6765\u5b58\u653e RKNN \u4ed3\u5e93\uff0c\u4f8b\u5982\u65b0\u5efa\u4e00\u4e2a\u540d\u79f0\u4e3a",(0,i.jsx)(n.code,{children:" Projects"})," \u7684\u6587\u4ef6\u5939\uff0c\u5e76\u5c06 ",(0,i.jsx)(n.code,{children:" RKNN-Toolkit2"})," \u548c",(0,i.jsx)(n.code,{children:"RKNN Model Zo"})," \u4ed3\u5e93\u5b58\u653e\u81f3\u8be5\u76ee\u5f55\u4e0b\uff0c\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u65b0\u5efa Projects \u6587\u4ef6\u5939  \r\nmkdir Projects \r\n \r\n# \u8fdb\u5165\u8be5\u76ee\u5f55 \r\ncd Projects \r\n \r\n# \u4e0b\u8f7d RKNN-Toolkit2 \u4ed3\u5e93 \r\ngit clone https://github.com/airockchip/rknn-toolkit2.git --depth 1 \r\n# \u4e0b\u8f7d RKNN Model Zoo \u4ed3\u5e93 \r\ngit clone https://github.com/airockchip/rknn_model_zoo.git --depth 1 \r\n# \u6ce8\u610f\uff1a \r\n# 1.\u53c2\u6570 --depth 1 \u8868\u793a\u53ea\u514b\u9686\u6700\u8fd1\u4e00\u6b21 commit  \r\n# 2.\u5982\u679c\u9047\u5230 git clone \u5931\u8d25\u7684\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 github \u4e2d\u4e0b\u8f7d\u538b\u7f29\u5305\u5230\u672c\u5730\uff0c\u7136\u540e\u89e3\u538b\u81f3\u8be5\u76ee\u5f55 \n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6574\u4f53\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Projects \r\n\u251c\u2500\u2500 rknn-toolkit2 \r\n\u2502   \u251c\u2500\u2500 doc \r\n\u2502   \u251c\u2500\u2500 rknn-toolkit2 \r\n\u2502   \u2502   \u251c\u2500\u2500 packages \r\n\u2502   \u2502   \u251c\u2500\u2500 docker \r\n\u2502   \u2502   \u2514\u2500\u2500 ... \r\n\u2502   \u251c\u2500\u2500 rknpu2 \r\n\u2502   \u2502   \u251c\u2500\u2500 runtime \r\n\u2502   \u2502   \u2514\u2500\u2500 ... \r\n\u2502   \u2514\u2500\u2500 ... \r\n\u2514\u2500\u2500 rknn_model_zoo \r\n    \u251c\u2500\u2500 datasets \r\n    \u251c\u2500\u2500 examples \r\n    \u2514\u2500\u2500 ... \n"})}),"\n",(0,i.jsx)(n.h4,{id:"12-\u5b89\u88c5-rknn-toolkit2-\u73af\u5883",children:"1.2 \u5b89\u88c5 RKNN-Toolkit2 \u73af\u5883"}),"\n",(0,i.jsx)(n.h5,{id:"121-\u5b89\u88c5-python",children:"1.2.1 \u5b89\u88c5 Python"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u7cfb\u7edf\u4e2d\u6ca1\u6709\u5b89\u88c5 Python 3.8\uff08\u5efa\u8bae\u7248\u672c\uff09\uff0c\u6216\u8005\u540c\u65f6\u6709\u591a\u4e2a\u7248\u672c\u7684 Python \u73af\u5883\uff0c\u5efa\u8bae \u4f7f\u7528 Conda \u521b\u5efa\u65b0\u7684 Python 3.8 \u73af\u5883\u3002"}),"\n",(0,i.jsx)(n.h6,{id:"1211-\u5b89\u88c5-conda",children:"1.2.1.1 \u5b89\u88c5 Conda"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u7ec8\u7aef\u7a97\u53e3\u4e2d\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u68c0\u67e5\u662f\u5426\u5b89\u88c5 Conda\uff0c\u82e5\u5df2\u5b89\u88c5\u5219\u53ef\u7701\u7565\u6b64\u8282\u6b65\u9aa4\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"conda -V \r\n# \u53c2\u8003\u8f93\u51fa\u4fe1\u606f\uff1aconda 23.9.0 \uff0c\u8868\u793a conda \u7248\u672c\u4e3a 23.9.0 \r\n# \u5982\u679c\u63d0\u793a conda: command not found\uff0c\u5219\u8868\u793a\u672a\u5b89\u88c5 conda\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u6ca1\u6709\u5b89\u88c5 Conda\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u94fe\u63a5\u4e0b\u8f7d Conda \u5b89\u88c5\u5305\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget -c https://mirrors.bfsu.edu.cn/anaconda/miniconda/Miniconda3-latest-Linux-x86_64.sh \n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 Conda\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"chmod 777 Miniconda3-latest-Linux-x86_64.sh \r\nbash Miniconda3-latest-Linux-x86_64.sh\n"})}),"\n",(0,i.jsx)(n.h6,{id:"1212-\u4f7f\u7528-conda-\u521b\u5efa-python-\u73af\u5883",children:"1.2.1.2 \u4f7f\u7528 Conda \u521b\u5efa Python \u73af\u5883"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u7ec8\u7aef\u7a97\u53e3\u4e2d\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 Conda base \u73af\u5883\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"source ~/miniconda3/bin/activate # miniconda3 \u5b89\u88c5\u7684\u76ee\u5f55 \r\n# \u6210\u529f\u540e\uff0c\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u4f1a\u53d8\u6210\u4ee5\u4e0b\u5f62\u5f0f\uff1a  \r\n# (base) xxx@xxx:~$\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u540d\u79f0\u4e3a toolkit2 \u7684 Python 3.8 \u73af\u5883\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"conda create -n toolkit2 python=3.8\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6fc0\u6d3b toolkit2 \u73af\u5883\uff0c\u540e\u7eed\u5c06\u5728\u6b64\u73af\u5883\u4e2d\u5b89\u88c5 ",(0,i.jsx)(n.code,{children:"RKNN-Toolkit2"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"conda activate toolkit2 \r\n# \u6210\u529f\u540e\uff0c\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u4f1a\u53d8\u6210\u4ee5\u4e0b\u5f62\u5f0f\uff1a \r\n# (toolkit2) xxx@xxx:~$ \n"})}),"\n",(0,i.jsx)(n.h5,{id:"122-\u5b89\u88c5\u4f9d\u8d56\u5e93\u548c-rknn-toolkit2",children:"1.2.2 \u5b89\u88c5\u4f9d\u8d56\u5e93\u548c RKNN-Toolkit2"}),"\n",(0,i.jsxs)(n.p,{children:["\u6fc0\u6d3b conda toolkit2 \u73af\u5883\u540e\uff0c\u8fdb\u5165",(0,i.jsx)(n.code,{children:" rknn-toolkit2"})," \u76ee\u5f55\uff0c\u6839\u636e requirements_cpxx.txt \u5b89\u88c5\u4f9d\u8d56 \u5e93\uff0c\u5e76\u901a\u8fc7 wheel \u5305\u5b89\u88c5",(0,i.jsx)(n.code,{children:" RKNN-Toolkit2"}),"\uff0c\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#\u8bf7\u5728x86_64\u67b6\u6784\u4e0b\u5b89\u88c5\u6b64\u5b89\u88c5\u5305\r\n# \u8fdb\u5165 rknn-toolkit2 \u76ee\u5f55 \r\ncd Projects/rknn-toolkit2/rknn-toolkit2 \r\n \r\n# \u8bf7\u6839\u636e\u4e0d\u540c\u7684 python \u7248\u672c\uff0c\u9009\u62e9\u4e0d\u540c\u7684 requirements \u6587\u4ef6 \r\n# \u4f8b\u5982 python3.8 \u5bf9\u5e94 requirements_cp38.txt  \r\npip install -r doc/requirements_cpxx.txt \r\n \r\n# \u5b89\u88c5 RKNN-Toolkit2 \r\n# \u8bf7\u6839\u636e\u4e0d\u540c\u7684 python \u7248\u672c\u53ca\u5904\u7406\u5668\u67b6\u6784\uff0c\u9009\u62e9\u4e0d\u540c\u7684 wheel \u5b89\u88c5\u5305\u6587\u4ef6\uff1a \r\n# \u5176\u4e2d x.x.x \u662f RKNN-Toolkit2 \u7248\u672c\u53f7\uff0cxxxxxxxx \u662f\u63d0\u4ea4\u53f7\uff0ccpxx \u662f python \u7248\u672c\u53f7\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u6570\u503c\u8fdb\u884c\u66ff\u6362 \r\npip install packages/rknn_toolkit2-x.x.x+xxxxxxxx-cpxx-cpxx-linux_x86_64.whl\r\n\r\n#\u5e76\u5728aaech64\u67b6\u6784\u4e0b\u5b89\u88c5\u6b64\u5b89\u88c5\u5305\r\n# \u8fdb\u5165 rknn-toolkit_lite2 \u76ee\u5f55 \r\ncd Projects/rknn-toolkit2/rknn-toolkit_lite2 \r\n \r\n# \u8bf7\u6839\u636e\u4e0d\u540c\u7684 python \u7248\u672c\uff0c\u9009\u62e9\u4e0d\u540c\u7684 requirements \u6587\u4ef6 \r\n# \u4f8b\u5982 python3.8 \u5bf9\u5e94 requirements_cp38.txt  \r\npip install -r doc/requirements_cpxx.txt \r\n \r\n# \u5b89\u88c5 RKNN-Toolkit_lite2 \r\n# \u8bf7\u6839\u636e\u4e0d\u540c\u7684 python \u7248\u672c\u53ca\u5904\u7406\u5668\u67b6\u6784\uff0c\u9009\u62e9\u4e0d\u540c\u7684 wheel \u5b89\u88c5\u5305\u6587\u4ef6\uff1a \r\n# \u5176\u4e2d x.x.x \u662f RKNN-Toolkit2 \u7248\u672c\u53f7\uff0cxxxxxxxx \u662f\u63d0\u4ea4\u53f7\uff0ccpxx \u662f python \u7248\u672c\u53f7\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u6570\u503c\u8fdb\u884c\u66ff\u6362\r\npip install packages/rknn_toolkit_lite2-x.x.x+xxxxxxxx-cpxx-cpxx-linux_aarch64.whl\n"})}),"\n",(0,i.jsx)(n.h5,{id:"123-\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",children:"1.2.3 \u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"x86_64"}),"\u67b6\u6784\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u82e5\u6ca1\u6709\u62a5\u9519\uff0c\u5219\u4ee3\u8868",(0,i.jsx)(n.code,{children:" RKNN-Toolkit2"})," \u73af\u5883\u5b89\u88c5\u6210\u529f\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 Python \u4ea4\u4e92\u6a21\u5f0f \r\npython \r\n \r\n# \u5bfc\u5165 RKNN \u7c7b  \r\nfrom rknn.api import RKNN\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"aarch64"}),"\u67b6\u6784\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u82e5\u6ca1\u6709\u62a5\u9519\uff0c\u5219\u4ee3\u8868 ",(0,i.jsx)(n.code,{children:"RKNN-Toolkit_lite2"})," \u73af\u5883\u5b89\u88c5\u6210\u529f\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 Python \u4ea4\u4e92\u6a21\u5f0f \r\npython \r\n \r\n# \u5bfc\u5165 RKNN \u7c7b  \r\nfrom rknnlite.api import RKNNLite\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u5b89\u88c5\u5931\u8d25\uff0c\u8bf7\u67e5\u9605 \u300aRockchip_RKNPU_User_Guide_RKNN_SDK_V1.6.0_CN.pdf\u300b\u6587\u6863\u4e2d\u7684\u7b2c 10.2 \u7ae0\u8282 \u201c\u5de5\u5177\u5b89\u88c5\u95ee\u9898\u201d\uff0c\u5176\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u4e86 ",(0,i.jsx)(n.code,{children:"RKNN-Toolkit2"})," \u73af\u5883\u5b89\u88c5\u5931\u8d25\u7684\u89e3\u51b3\u65b9\u6cd5\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"13\u5b89\u88c5\u7f16\u8bd1\u5de5\u5177",children:"1.3\u5b89\u88c5\u7f16\u8bd1\u5de5\u5177"}),"\n",(0,i.jsx)(n.h5,{id:"131-\u5b89\u88c5-cmake",children:"1.3.1 \u5b89\u88c5 CMake"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u7ec8\u7aef\u4e2d\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u66f4\u65b0\u5305\u5217\u8868 \r\nsudo apt update \r\n \r\n# \u5b89\u88c5 cmake \r\nsudo apt install cmake \n"})}),"\n",(0,i.jsx)(n.h5,{id:"132-\u5b89\u88c5\u7f16\u8bd1\u5668",children:"1.3.2 \u5b89\u88c5\u7f16\u8bd1\u5668"}),"\n",(0,i.jsx)(n.p,{children:"1.GCC \u4e0b\u8f7d\u5730\u5740"}),"\n",(0,i.jsxs)(n.p,{children:["\u677f\u7aef\u4e3a 64 \u4f4d\u7cfb\u7edf\uff1a",(0,i.jsx)(n.code,{children:"https://releases.linaro.org/components/toolchain/binaries/6.3 2017.05/aarch64-linux-gnu/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu.tar.xz  "})]}),"\n",(0,i.jsx)(n.p,{children:"2.\u89e3\u538b\u8f6f\u4ef6\u5305"}),"\n",(0,i.jsxs)(n.p,{children:["\u5efa\u8bae\u5c06 GCC \u8f6f\u4ef6\u5305\u89e3\u538b\u5230 ",(0,i.jsx)(n.code,{children:"Projects"})," \u7684\u6587\u4ef6\u5939\u4e2d\u3002\u4ee5\u677f\u7aef\u4e3a 64 \u4f4d\u7cfb\u7edf\u7684 GCC  \u8f6f\u4ef6 \u5305\u4e3a\u4f8b\uff0c\u5b58\u653e\u4f4d\u7f6e\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Projects \r\n\u251c\u2500\u2500 rknn-toolkit2 \r\n\u251c\u2500\u2500 rknn_model_zoo \r\n\u2514\u2500\u2500 gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu # \u6b64\u8def\u5f84\u5728\u540e\u9762\u7f16\u8bd1RKNN C Demo\u65f6\u4f1a\u7528\u5230\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6b64\u65f6\uff0c GCC \u7f16\u8bd1\u5668\u7684\u8def\u5f84\u662f ",(0,i.jsx)(n.code,{children:"Projects/gcc-linaro-6.3.1-2017.05-x86_64_ aarch64-linux-gnu/bin/aarch64-linux-gnu "})]}),"\n",(0,i.jsx)(n.h4,{id:"14-\u786e\u8ba4-rknpu2-\u9a71\u52a8\u7248\u672c",children:"1.4 \u786e\u8ba4 RKNPU2 \u9a71\u52a8\u7248\u672c"}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u5728\u677f\u7aef\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u8be2 RKNPU2 \u9a71\u52a8\u7248\u672c\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"dmesg | grep -i rknpu\n"})}),"\n",(0,i.jsx)(n.p,{children:"Rockchip \u5f00\u53d1\u677f\u7684\u5b98\u65b9\u56fa\u4ef6\u5747\u81ea\u5e26 RKNPU2 \u9a71\u52a8\u3002\u82e5\u4ee5\u4e0a\u547d\u4ee4\u67e5\u8be2\u4e0d\u5230 NPU \u9a71\u52a8\u7248\u672c\uff0c \u5219\u53ef\u80fd\u4f7f\u7528\u7684\u662f\u7b2c\u4e09\u65b9\u56fa\u4ef6\uff0c\u5176\u4e2d\u53ef\u80fd\u6ca1\u6709\u5b89\u88c5NPU\u9a71\u52a8\u3002\u53ef\u4ee5\u5728 kernel  config \u4e2d\u5c06 CONFIG_ROCKCHIP_RKNPU \u9009\u9879\u7684\u503c\u6539\u6210 y \u4ee5\u96c6\u6210 NPU \u9a71\u52a8\uff0c\u7136\u540e\u91cd\u65b0\u7f16\u8bd1 \u5185\u6838\u9a71\u52a8\u5e76\u70e7\u5f55\u3002\u5efa\u8bae RKNPU2 \u9a71\u52a8\u7248\u672c >= 0.9.2\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"2-\u8fd0\u884c\u793a\u4f8b\u7a0b\u5e8f",children:"2 \u8fd0\u884c\u793a\u4f8b\u7a0b\u5e8f"}),"\n",(0,i.jsx)(n.h4,{id:"21-rknn-model-zoo-\u4ecb\u7ecd",children:"2.1 RKNN Model Zoo \u4ecb\u7ecd"}),"\n",(0,i.jsx)(n.p,{children:"RKNN Model Zoo \u63d0\u4f9b\u4e86\u793a\u4f8b\u4ee3\u7801\uff0c\u65e8\u5728\u5e2e\u52a9\u7528\u6237\u5feb\u901f\u5728 Rockchip \u7684\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\u5404\u79cd\u5e38 \u7528\u6a21\u578b\uff0c\u6574\u4e2a\u5de5\u7a0b\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"rknn_model_zoo \r\n\u251c\u2500\u2500 3rdparty # \u7b2c\u4e09\u65b9\u5e93 \r\n\u251c\u2500\u2500 datasets # \u6570\u636e\u96c6 \r\n\u251c\u2500\u2500 examples # \u793a\u4f8b\u4ee3\u7801 \r\n\u251c\u2500\u2500 utils # \u5e38\u7528\u65b9\u6cd5\uff0c\u5982\u6587\u4ef6\u64cd\u4f5c\uff0c\u753b\u56fe\u7b49 \r\n\u251c\u2500\u2500 build-android.sh # \u7528\u4e8e\u76ee\u6807\u4e3a Android \u7cfb\u7edf\u5f00\u53d1\u677f\u7684\u7f16\u8bd1\u811a\u672c \r\n\u251c\u2500\u2500 build-linux.sh # \u7528\u4e8e\u76ee\u6807\u4e3aLinux \u7cfb\u7edf\u5f00\u53d1\u677f\u7684\u7f16\u8bd1\u811a\u672c \r\n\u2514\u2500\u2500 ... \n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5176\u4e2d\uff0cexamples \u76ee\u5f55\u5305\u62ec\u4e86\u4e00\u4e9b\u5e38\u7528\u6a21\u578b\u7684\u793a\u4f8b\uff0c\u4f8b\u5982 MobileNet \u548c YOLO \u7b49\u3002\u6bcf\u4e2a\u6a21 \u578b\u793a\u4f8b\u63d0\u4f9b\u4e86 Python \u548c C/C++ \u4e24\u4e2a\u7248\u672c\u7684\u793a\u4f8b\u4ee3\u7801\uff08\u4e3a\u4e86\u65b9\u4fbf\u63cf\u8ff0\uff0c\u540e\u7eed\u7528 RKNN Python  Demo \u548c RKNN C Demo \u6765\u8868\u793a\uff09\u3002\u4ee5 YOLOv5 \u6a21\u578b\u4e3a\u4f8b\uff0c\u5176\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"rknn_model_zoo \r\n\u251c\u2500\u2500 examples \r\n\u2502   \u2514\u2500\u2500 yolov5 \r\n\u2502       \u251c\u2500\u2500 cpp # C/C++ \u7248\u672c\u7684\u793a\u4f8b\u4ee3\u7801 \r\n\u2502       \u251c\u2500\u2500 model # \u6a21\u578b\u3001\u6d4b\u8bd5\u56fe\u7247\u7b49\u6587\u4ef6 \r\n\u2502       \u251c\u2500\u2500 python # \u6a21\u578b\u8f6c\u6362\u811a\u672c\u548cPython\u7248\u672c\u7684\u793a\u4f8b\u4ee3\u7801 \r\n\u2502       \u2514\u2500\u2500 README.md \r\n\u2514\u2500\u2500 ... \n"})}),"\n",(0,i.jsx)(n.h4,{id:"22-rknn-c-demo-\u4f7f\u7528\u65b9\u6cd5",children:"2.2 RKNN C Demo \u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.p,{children:"\u4e0b\u9762\u4ee5 YOLOv5 \u6a21\u578b\u4e3a\u4f8b\uff0c\u4ecb\u7ecd RKNN C Demo \u7684\u4f7f\u7528\u65b9\u6cd5\u3002  \u6ce8\uff1a\u4e0d\u540c\u7684 RKNN C Demo \u7528\u6cd5\u5b58\u5728\u5dee\u5f02\uff0c\u8bf7\u6309\u7167\u5404\u81ea\u76ee\u5f55\u4e0b README.md \u4e2d\u7684\u6b65\u9aa4\u8fd0\u884c\u3002"}),"\n",(0,i.jsx)(n.h5,{id:"221-\u51c6\u5907\u6a21\u578b",children:"2.2.1 \u51c6\u5907\u6a21\u578b"}),"\n",(0,i.jsxs)(n.p,{children:["\u6b64\u6b65\u9aa4\u8bf7\u5728",(0,i.jsx)(n.code,{children:"x86_64"}),"\u67b6\u6784\u4e0b\u8fdb\u884c"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165",(0,i.jsx)(n.code,{children:"rknn_model_zoo/examples/yolov5/model"}),"\u76ee\u5f55\uff0c\u8fd0\u884c",(0,i.jsx)(n.code,{children:" download_model.sh"})," \u811a\u672c\uff0c\u8be5\u811a\u672c \u5c06\u4e0b\u8f7d\u4e00\u4e2a\u53ef\u7528\u7684 YOLOv5 ONNX \u6a21\u578b\uff0c\u5e76\u5b58\u653e\u5728\u5f53\u524d model \u76ee\u5f55\u4e0b\uff0c\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 rknn_model_zoo/examples/yolov5/model \u76ee\u5f55 \r\ncd Projects/rknn_model_zoo/examples/yolov5/model \r\n \r\n# \u8fd0\u884c download_model.sh \u811a\u672c\uff0c\u4e0b\u8f7d yolov5 onnx \u6a21\u578b \r\n# \u4f8b\u5982\uff0c\u4e0b\u8f7d\u597d\u7684 onnx \u6a21\u578b\u5b58\u653e\u8def\u5f84\u4e3a model/yolov5s_relu.onnx \r\n./download_model.sh \n"})}),"\n",(0,i.jsx)(n.h5,{id:"222-\u6a21\u578b\u8f6c\u6362",children:"2.2.2 \u6a21\u578b\u8f6c\u6362"}),"\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165",(0,i.jsx)(n.code,{children:" rknn_model_zoo/examples/yolov5/python"})," \u76ee\u5f55\uff0c\u8fd0\u884c",(0,i.jsx)(n.code,{children:" convert.py"})," \u811a\u672c\uff0c\u8be5\u811a\u672c\u5c06\u539f\u59cb\u7684ONNX \u6a21\u578b\u8f6c\u6210 RKNN \u6a21\u578b\uff0c\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 rknn_model_zoo/examples/yolov5/python \u76ee\u5f55 \r\ncd Projects/rknn_model_zoo/examples/yolov5/python \r\n \r\n# \u8fd0\u884c convert.py \u811a\u672c\uff0c\u5c06\u539f\u59cb\u7684 ONNX \u6a21\u578b\u8f6c\u6210 RKNN \u6a21\u578b \r\n# \u7528\u6cd5: python convert.py model_path [rk3566|rk3588|rk3562] [i8/fp] \r\n[output_path] \r\npython convert.py ../model/yolov5s_relu.onnx rk3588 i8 ../model/yolov5s_relu.rknn \n"})}),"\n",(0,i.jsx)(n.h5,{id:"223-\u8fd0\u884c-rknn-c-demo",children:"2.2.3 \u8fd0\u884c RKNN C Demo"}),"\n",(0,i.jsx)(n.h6,{id:"2231-\u7f16\u8bd1",children:"2.2.3.1 \u7f16\u8bd1"}),"\n",(0,i.jsx)(n.p,{children:"\u5b8c\u6574\u8fd0\u884c\u4e00\u4e2a RKNN C Demo\uff0c\u9700\u8981\u5148\u5c06 C/C++ \u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u53ef\u6267\u884c \u6587\u4ef6\u3001\u6a21\u578b\u6587\u4ef6\u3001\u6d4b\u8bd5\u56fe\u7247\u7b49\u76f8\u5173\u6587\u4ef6\u63a8\u9001\u5230\u677f\u7aef\u4e0a\uff0c\u6700\u540e\u5728\u677f\u7aef\u8fd0\u884c\u53ef\u6267\u884c\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u9700\u8981\u4f7f\u7528 rknn_model_zoo \u76ee\u5f55\u4e0b\u7684  build-linux.sh \u811a\u672c\u8fdb\u884c\u7f16\u8bd1\u3002\u5728\u8fd0\u884c build-linux.sh \u811a\u672c\u4e4b\u524d\uff0c\u9700\u8981\u6307\u5b9a\u7f16\u8bd1\u5668\u7684\u8def\u5f84  GCC_COMPILER \u4e3a\u672c\u5730\u7684GCC \u7f16\u8bd1\u5668\u8def\u5f84\u3002\u5373\u5728 build-linux.sh \u811a\u672c\u4e2d\uff0c\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u6dfb\u52a0\u5230 build-linux.sh \u811a\u672c\u7684\u5f00\u5934\u4f4d\u7f6e\u5373\u53ef \r\nGCC_COMPILER=Projects/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u7136\u540e\u5728",(0,i.jsx)(n.code,{children:" rknn_model_zoo"})," \u76ee\u5f55\u4e0b\uff0c\u8fd0\u884c",(0,i.jsx)(n.code,{children:" build-linux.sh"})," \u811a\u672c\uff0c\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 rknn_model_zoo \u76ee\u5f55 \r\ncd Projects/rknn_model_zoo \r\n \r\n# \u8fd0\u884c build-linux.sh \u811a\u672c \r\n# \u7528\u6cd5:./build-linux.sh -t <target> -a <arch> -d <build_demo_name> [-b <build_type>] [-m] \r\n# -t : target (rk356x/rk3588) # \u5e73\u53f0\u7c7b\u578b\uff0crk3568/rk3566 \u90fd\u7edf\u4e00\u4e3ark356x \r\n# -a : arch (aarch64/armhf) # \u677f\u7aef\u7cfb\u7edf\u67b6\u6784 \r\n# -d : demo name # \u5bf9\u5e94 examples \u76ee\u5f55\u4e0b\u5b50\u6587\u4ef6\u5939\u7684\u540d\u79f0\uff0c\u5982yolov5\u3001mobilenet \r\n# -b : build_type(Debug/Release) \r\n# -m : enable address sanitizer, build_type need set to Debug \r\n./build-linux.sh -t rk3588 -a aarch64 -d yolov5\n"})}),"\n",(0,i.jsx)(n.h6,{id:"2232-\u63a8\u9001\u6587\u4ef6\u5230\u9b54\u4e91\u817e\u4e3b\u673a",children:"2.2.3.2 \u63a8\u9001\u6587\u4ef6\u5230\u9b54\u4e91\u817e\u4e3b\u673a"}),"\n",(0,i.jsx)(n.p,{children:"\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u4f1a\u5728 rknn_model_zoo \u76ee\u5f55\u4e0b\u4ea7\u751f install \u6587\u4ef6\u5939\uff0c \u5176\u4e2d\u6709\u7f16\u8bd1\u597d\u7684\u53ef\u6267\u884c\u6587 \u4ef6\uff0c\u4ee5\u53ca\u6d4b\u8bd5\u56fe\u7247\u7b49\u76f8\u5173\u6587\u4ef6\u3002\u53c2\u8003\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"install \r\n\u251c\u2500\u2500 rk356x_linux_aarch64 # rk356x \u5e73\u53f0 \r\n\u2514\u2500\u2500 rk3588_android_arm64-v8a # rk3588\u5e73\u53f0 \r\n    \u2514\u2500\u2500 rknn_yolov5_demo  \r\n        \u251c\u2500\u2500 lib # \u4f9d\u8d56\u5e93 \r\n        \u251c\u2500\u2500 model # \u5b58\u653e\u6a21\u578b\u3001\u6d4b\u8bd5\u56fe\u7247\u7b49\u6587\u4ef6 \r\n        \u2514\u2500\u2500 rknn_yolov5_demo # \u53ef\u6267\u884c\u6587\u4ef6 \n"})}),"\n",(0,i.jsx)(n.h6,{id:"2233-\u9b54\u4e91\u817e\u4e3b\u673a\u8fd0\u884cdemo",children:"2.2.3.3 \u9b54\u4e91\u817e\u4e3b\u673a\u8fd0\u884cDemo"}),"\n",(0,i.jsxs)(n.p,{children:["\u6b64\u6b65\u9aa4\u8bf7\u5728\u9b54\u4e91\u817e\u4e3b\u673a\u4e2d\u7684",(0,i.jsx)(n.code,{children:"aarch64"}),"\u67b6\u6784\u73af\u5883\u4e2d\u8fdb\u884c"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u8fdb\u5165 rknn_yolov5_demo \u76ee\u5f55 \r\ncd /data/rknn_yolov5_demo/  \r\n# \u8bbe\u7f6e\u4f9d\u8d56\u5e93\u73af\u5883 \r\nexport LD_LIBRARY_PATH=./lib \r\n# \u8fd0\u884c\u53ef\u6267\u884c\u6587\u4ef6 \r\n# \u7528\u6cd5: ./rknn_yolov5_demo <model_path> <input_path> \r\n./rknn_yolov5_demo model/yolov5s_relu.rknn model/bus.jpg\n"})}),"\n",(0,i.jsx)(n.h6,{id:"2334-\u67e5\u770b\u7ed3\u679c",children:"2.3.3.4 \u67e5\u770b\u7ed3\u679c"}),"\n",(0,i.jsx)(n.p,{children:"\u811a\u672c\u8fd0\u884c\u6210\u529f\u540e\u8f93\u51fa\u4fe1\u606f\u5982\u4e0b\uff0c\u5176\u4e2d\uff0cclass \u5b57\u6bb5\u4ee3\u8868\u9884\u6d4b\u7684\u7c7b\u522b\uff0cscore \u4e3a\u5f97\u5206\uff0c(xmin,  ymin) \u662f\u68c0\u6d4b\u6846\u7684\u5de6\u4e0a\u89d2\u5750\u6807\uff0c(xmax, ymax) \u662f\u68c0\u6d4b\u6846\u7684\u53f3\u4e0b\u89d2\u5750\u6807\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# class @ \uff08xmin, ymin, xmax, ymax\uff09score \r\nperson @ (209 244 286 506) 0.884 \r\nperson @ (478 238 559 526) 0.868 \r\nperson @ (110 238 230 534) 0.825 \r\nbus     @ (94 129 553 468) 0.705 \r\nperson @ (79 354 122 516) 0.339\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u4e3a",(0,i.jsx)(n.code,{children:" rknn_yolov5_demo/out.png"}),"\uff0c\u53ef\u4ee5\u4ece\u9b54\u4e91\u817e\u62c9\u53d6\u5230\u672c\u5730\u67e5\u770b\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u51fa\u56fe\u7247\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031173042275.png",alt:"image-20241031173042275"})}),"\n",(0,i.jsx)(n.h2,{id:"\u56db\u8fd0\u884crkmpp-demo",children:"\u56db\u3001\u8fd0\u884crkmpp demo"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u4e0b\u8f7drkmpp",children:"1 \u4e0b\u8f7drkmpp"}),"\n",(0,i.jsx)(n.p,{children:"\u65b0\u5efarkmpp\u6587\u4ef6\u5939"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mkdir mpp\r\ncd mpp\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528git\u514b\u9686rkmpp"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone https://github.com/rockchip-linux/mpp.git\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u4ea4\u53c9\u7f16\u8bd1mpp\u5e93",children:"2 \u4ea4\u53c9\u7f16\u8bd1MPP\u5e93"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd build/linux/aarch64\r\nvim arm.linux.cross.cmake\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u67e5\u770b\u662f\u5426\u662f\u5bf9\u5e94aarch64\u67b6\u6784\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\uff0c\u5982\u56fe\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031180429277.png",alt:"image-20241031180429277"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fdb\u884c\u7f16\u8bd1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./arm.linux.cross.cmake && make\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u68c0\u67e5\u7f16\u8bd1\u7ed3\u679c",children:"3 \u68c0\u67e5\u7f16\u8bd1\u7ed3\u679c"}),"\n",(0,i.jsx)(n.p,{children:"\u7f16\u8bd1\u4e4b\u540e\uff0c\u52a8\u6001\u5e93\u5728mpp\u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031180702120.png",alt:"image-20241031180702120"})}),"\n",(0,i.jsx)(n.p,{children:"\u6d4b\u8bd5\u5de5\u5177\u5728test\u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031180747495.png",alt:"image-20241031180747495"})}),"\n",(0,i.jsx)(n.h3,{id:"4-\u5b89\u88c5\u5e93\u6587\u4ef6",children:"4 \u5b89\u88c5\u5e93\u6587\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:"\u5728mpp\u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo make install\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-\u8bbe\u7f6e\u6253\u5370\u65e5\u5fd7",children:"5 \u8bbe\u7f6e\u6253\u5370\u65e5\u5fd7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"export mpi_debug=1\r\nexport mpp_debug=1\r\nexport h264d_debug=1\r\nexport mpp_syslog_perror=1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-\u8fd0\u884c\u5e76\u67e5\u770b\u65e5\u5fd7",children:"6 \u8fd0\u884c\u5e76\u67e5\u770b\u65e5\u5fd7"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f8b\u5982\u8fd0\u884c",(0,i.jsx)(n.code,{children:"mpi_dec_test"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./mpi_dec_test\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6709\u4ee5\u4e0b\u65e5\u5fd7\u8f93\u51fa\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241031181644770.png",alt:"image-20241031181644770"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4e94\u5b89\u88c5librga\u5e93",children:"\u4e94\u3001\u5b89\u88c5librga\u5e93"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.p,{children:"RGA (Raster Graphic Acceleration Unit)\u662f\u4e00\u4e2a\u72ec\u7acb\u76842D\u786c\u4ef6\u52a0\u901f\u5668\uff0c\u53ef\u7528\u4e8e\u52a0\u901f\u70b9/\u7ebf\u7ed8\u5236\uff0c\u6267\u884c\u56fe\u50cf\u7f29\u653e\u3001\u65cb\u8f6c\u3001bitBlt\u3001alpha\u6df7\u5408\u7b49\u5e38\u89c1\u76842D\u56fe\u5f62\u64cd\u4f5c\u3002\u672c\u4ed3\u5e93\u4ee3\u7801\u5b9e\u73b0\u4e86RGA\u7528\u6237\u7a7a\u95f4\u9a71\u52a8\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u7cfb\u52172D\u56fe\u5f62\u64cd\u4f5cAPI\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u4e0b\u8f7dlibrga",children:"1 \u4e0b\u8f7dlibrga"}),"\n",(0,i.jsx)(n.p,{children:"\u65b0\u5efalibrga\u6587\u4ef6\u5939"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mkdir librga\r\ncd librga\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528git\u514b\u9686rkmpp"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone https://github.com/airockchip/librga.git\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u79fb\u52a8\u5e93\u6587\u4ef6",children:"2 \u79fb\u52a8\u5e93\u6587\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u524d\u9884\u7f16\u8bd1\u4ed3\u5e93API\u7248\u672c\uff1a1.10.1"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"libs"}),"\u76ee\u5f55\u4e0b\u5b58\u653e\u4e86\u9884\u7f16\u8bd1\u7684librga\u5e93\uff0c\u5c06\u4ed6\u590d\u5236\u5230",(0,i.jsx)(n.code,{children:"/usr/lib"}),"\u76ee\u5f55\u4e0b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cp libs/Linux/gcc-aaech64/librga.so /usr/lib\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u9a8c\u8bc1librga\u662f\u5426\u53ef\u7528",children:"3 \u9a8c\u8bc1librga\u662f\u5426\u53ef\u7528"}),"\n",(0,i.jsx)(n.h4,{id:"31-\u79fb\u52a8\u6d4b\u8bd5\u6587\u4ef6",children:"3.1 \u79fb\u52a8\u6d4b\u8bd5\u6587\u4ef6"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"samples/sample_file"}),"\u76ee\u5f55\u4e0b\u5b58\u653e\u7740\u793a\u4f8b\u56fe\u7247\uff0c\u4f7f\u7528\u793a\u4f8b\u56fe\u7247\u65f6\uff0cLinux\u7cfb\u7edf\u987b\u5c06\u6e90\u56fe\u50a8\u5b58\u5728\u8bbe\u5907/usr/data\u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cp ./samples/sample_file/in0w1280-h720-rgba8888.bin in1w1280-h720-rgba8888.bin /usr/data\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u663e\u793a\u65e0\u6b64\u6587\u4ef6\u5939\uff0c\u53ef\u81ea\u884c\u521b\u5efa"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd /usr/\r\nmkdir data\n"})}),"\n",(0,i.jsx)(n.h4,{id:"32-\u8fd0\u884cim2d_api_demo",children:"3.2 \u8fd0\u884cim2d_api_demo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd samples\n"})}),"\n",(0,i.jsx)(n.h5,{id:"321-\u5de5\u5177\u94fe\u4fee\u6539",children:"3.2.1 \u5de5\u5177\u94fe\u4fee\u6539"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Linux\uff08buildroot/debian\uff09"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u53c2\u8003librga\u6e90\u7801\u76ee\u5f55\u4e0b",(0,i.jsx)(n.strong,{children:"toolchains/toolchain_linux.cmake"}),"\u5199\u6cd5\uff0c\u4fee\u6539\u5de5\u5177\u94fe\u8def\u5f84\u3001\u540d\u79f0\u3002"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u5de5\u5177\u94fe\u9009\u9879"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"TOOLCHAIN_HOME"}),(0,i.jsx)(n.td,{children:"\u5de5\u5177\u94fe\u76ee\u5f55"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"TOOLCHAIN_NAME"}),(0,i.jsx)(n.td,{children:"\u5de5\u5177\u94fe\u540d\u79f0"})]})]})]}),"\n",(0,i.jsx)(n.h5,{id:"322-\u7f16\u8bd1\u811a\u672c\u4fee\u6539",children:"3.2.2 \u7f16\u8bd1\u811a\u672c\u4fee\u6539"}),"\n",(0,i.jsxs)(n.p,{children:["\u4fee\u6539samples\u76ee\u5f55\u6216\u9700\u8981\u7f16\u8bd1\u7684\u793a\u4f8b\u4ee3\u7801\u76ee\u5f55\u4e0b",(0,i.jsx)(n.strong,{children:"cmake_*.sh"}),"\uff0c\u6307\u5b9atoolchain\u8def\u5f84\u3002"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7f16\u8bd1\u9009\u9879"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"TOOLCHAIN_PATH"}),(0,i.jsx)(n.td,{children:"toolchain\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u5373\u300a\u5de5\u5177\u94fe\u4fee\u6539\u300b\u5c0f\u8282\u4e2d\u4fee\u6539\u540e\u7684toolchain_*.cmake\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LIBRGA_PATH"}),(0,i.jsx)(n.td,{children:"\u9700\u8981\u94fe\u63a5\u7684librga.so\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3alibrga cmake\u7f16\u8bd1\u65f6\u7684\u9ed8\u8ba4\u6253\u5305\u8def\u5f84"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"BUILD_DIR"}),(0,i.jsx)(n.td,{children:"\u7f16\u8bd1\u751f\u6210\u6587\u4ef6\u5b58\u653e\u7684\u76f8\u5bf9\u8def\u5f84"})]})]})]}),"\n",(0,i.jsx)(n.h5,{id:"323-\u6267\u884c\u7f16\u8bd1\u811a\u672c",children:"3.2.3 \u6267\u884c\u7f16\u8bd1\u811a\u672c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"chmod +x ./cmake_linux.sh\r\n./cmake_android.sh\n"})}),"\n",(0,i.jsx)(n.h5,{id:"324-\u8fd0\u884c\u9a8c\u8bc1",children:"3.2.4 \u8fd0\u884c\u9a8c\u8bc1"}),"\n",(0,i.jsx)(n.p,{children:"\u6240\u7f16\u8bd1\u5185\u5bb9\u5c06\u51fa\u73b0\u5728\u65b0\u5efa\u7684build\u6587\u4ef6\u5939\u4e2d"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241101104713589.png",alt:"image-20241101104713589"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd0\u884crgaImDemo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./rgaImDemo --copy\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd0\u884c\u540e\u5c06\u6253\u5370\u51falibrga\u7248\u672c\u4ee5\u53ca\u5176\u4ed6\u65e5\u5fd7"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241101104859786.png",alt:"image-20241101104859786"})}),"\n",(0,i.jsx)(n.h2,{id:"\u516d\u8fd0\u884cjellyfin",children:"\u516d\u3001\u8fd0\u884cjellyfin"}),"\n",(0,i.jsx)(n.p,{children:"+++"}),"\n",(0,i.jsx)(n.h3,{id:"\u5728linux\u4e3b\u673a\u4e0a\u914d\u7f6e",children:"\u5728Linux\u4e3b\u673a\u4e0a\u914d\u7f6e"}),"\n",(0,i.jsxs)(n.p,{children:["Jellyfin\u6240\u9700\u7684",(0,i.jsx)(n.code,{children:"jellyfin-ffmpeg"}),"deb\u5305\u9644\u5e26\u6240\u6709\u5fc5\u8981\u7684\u7528\u6237\u6a21\u5f0fRockchip MPP\u548cRGA\u9a71\u52a8\u7a0b\u5e8f\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u53ea\u9700\u5b89\u88c5 OpenCL \u8fd0\u884c\u65f6 \uff08libmali\uff09 \u5e76\u914d\u7f6e\u8bbe\u5907\u6743\u9650"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u5b89\u88c5\u6240\u9700\u5b89\u88c5\u5305",children:"1 \u5b89\u88c5\u6240\u9700\u5b89\u88c5\u5305"}),"\n",(0,i.jsxs)(n.p,{children:["\u65b0\u5efa",(0,i.jsx)(n.code,{children:"jellyfin"}),"\u6587\u4ef6\u5939"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mkdir jrllyfin\r\ncd jrllyfin\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0b\u8f7d\u6240\u9700\u7684",(0,i.jsx)(n.code,{children:"jellyfin-server"}),"\u3001",(0,i.jsx)(n.code,{children:"jellyfin-web"}),"\u548c",(0,i.jsx)(n.code,{children:"jellyfin-ffmpeg7"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget https://repo.jellyfin.org/files/server/ubuntu/latest-stable/arm64/jellyfin-server_10.10.0+ubu2204_arm64.deb\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget https://repo.jellyfin.org/files/server/ubuntu/latest-stable/arm64/jellyfin-web_10.10.0+ubu2204_all.deb\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget https://repo.jellyfin.org/files/ffmpeg/ubuntu/latest-7.x/arm64/jellyfin-ffmpeg7_7.0.2-5-jammy_arm64.deb\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u65e0\u6cd5\u4e0b\u8f7d\u8bf7\u81ea\u884c\u5728\u5b98\u7f51\u4e0b\u8f7d\u5e76\u4f20\u5230\u9b54\u4e91\u817e\u4e3b\u673a\u7aef"}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"dpkg -i jellyfin-ffmpeg7_7.0.2-5-jammy_arm64.deb\r\ndpkg -i jellyfin-server_10.10.0+ubu2204_arm64.deb\r\ndpkg -i jellyfin-web_10.10.0+ubu2204_all.deb\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"2-\u786e\u4fdddma_heapdrimpp_service\u548crga\u5b58\u5728\u4e8edev\u4e2d",children:["2 \u786e\u4fdd",(0,i.jsx)(n.code,{children:"dma_heap"}),"\u3001",(0,i.jsx)(n.code,{children:"dri"}),"\u3001",(0,i.jsx)(n.code,{children:"mpp_service"}),"\u548c",(0,i.jsx)(n.code,{children:"rga"}),"\u5b58\u5728\u4e8e",(0,i.jsx)(n.code,{children:"/dev"}),"\u4e2d"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'ls -l /dev | grep -E "mpp|rga|dri|dma_heap"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241101111448047.png",alt:"image-20241101111448047"})}),"\n",(0,i.jsx)(n.p,{children:"\u5426\u5219\u8bf7\u5c06BSP\u5185\u6838\u5347\u7ea7\u52305.10LTS\u53ca\u66f4\u9ad8\u7248\u672c"}),"\n",(0,i.jsx)(n.h3,{id:"3-\u8bbe\u7f6eudev\u89c4\u5219\u6587\u4ef6",children:"3 \u8bbe\u7f6eudev\u89c4\u5219\u6587\u4ef6"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u4ee5\u4e0b\u884c\u6dfb\u52a0\u5230",(0,i.jsx)(n.code,{children:"/etc/udev/rules.d/99-rk-device-permissions.rules"}),"\uff0c\u91cd\u65b0\u542f\u52a8\u4ee5\u4f7f\u5176\u751f\u6548"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'KERNEL=="mpp_service", MODE="0660", GROUP="video"\r\nKERNEL=="rga", MODE="0660", GROUP="video"\r\nKERNEL=="system", MODE="0666", GROUP="video"\r\nKERNEL=="system-dma32", MODE="0666", GROUP="video"\r\nKERNEL=="system-uncached", MODE="0666", GROUP="video"\r\nKERNEL=="system-uncached-dma32", MODE="0666", GROUP="video" RUN+="/usr/bin/chmod a+rw /dev/dma_heap"\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u65e0\u6b64\u6587\u4ef6\uff0c\u8bf7\u81ea\u884c\u521b\u5efa"}),"\n",(0,i.jsx)(n.h3,{id:"4-\u6dfb\u52a0\u7528\u6237",children:"4 \u6dfb\u52a0\u7528\u6237"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u7528\u6237",(0,i.jsx)(n.code,{children:"jellfin"}),"\u6dfb\u52a0\u5230",(0,i.jsx)(n.code,{children:"render"}),"\u548c",(0,i.jsx)(n.code,{children:"video"}),"\u7ec4\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8",(0,i.jsx)(n.code,{children:"jellyfin"}),"\u670d\u52a1"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo usermod -aG render jellyfin\r\nsudo usermod -aG video jellyfin\r\nsudo systemctl restart jellyfin\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-\u5728\u4e3b\u673a\u4e0a\u5b89\u88c5-arm-mali-opencl-\u8fd0\u884c\u65f6-libmali",children:"5 \u5728\u4e3b\u673a\u4e0a\u5b89\u88c5 ARM Mali OpenCL \u8fd0\u884c\u65f6 \uff08libmali\uff09\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget https://github.com/tsukumijima/libmali-rockchip/releases/download/v1.9-1-2d267b0/libmali-valhall-g610-g13p0-gbm_1.9-1_arm64.deb\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u65e0\u6cd5\u4e0b\u8f7d\u8bf7\u81ea\u884c\u5728\u5b98\u7f51\u4e0b\u8f7d\u5e76\u4f20\u5230\u9b54\u4e91\u817e\u4e3b\u673a\u7aef"}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"dpkg -i libmali-valhall-g610-g13p0-gbm_1.9-1_arm64.deb\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-\u68c0\u67e5opencl\u8fd0\u884c\u65f6\u72b6\u6001",children:"6 \u68c0\u67e5OpenCL\u8fd0\u884c\u65f6\u72b6\u6001"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'sudo /usr/lib/jellyfin-ffmpeg/ffmpeg -v debug -init_hw_device rkmpp=rk -init_hw_device opencl=ocl@rk\r\n\r\narm_release_ver: g13p0-01eac0, rk_so_ver: 10\r\n[AVHWDeviceContext @ 0xaaaae8321360] 1 OpenCL platforms found.\r\n[AVHWDeviceContext @ 0xaaaae8321360] 1 OpenCL devices found on platform "ARM Platform".\r\n[AVHWDeviceContext @ 0xaaaae8321360] 0.0: ARM Platform / Mali-G610 r0p0\r\n[AVHWDeviceContext @ 0xaaaae8321360] cl_arm_import_memory found as platform extension.\r\n[AVHWDeviceContext @ 0xaaaae8321360] cl_khr_image2d_from_buffer found as platform extension.\r\n[AVHWDeviceContext @ 0xaaaae8321360] DRM to OpenCL mapping on ARM function found (clImportMemoryARM).\r\n...\n'})}),"\n",(0,i.jsx)(n.h3,{id:"7-\u8bbe\u7f6ejellyfin",children:"7 \u8bbe\u7f6ejellyfin"}),"\n",(0,i.jsx)(n.h4,{id:"71\u767b\u5f55jellyfin\u5ba2\u6237\u7aef",children:"7.1\u767b\u5f55jellyfin\u5ba2\u6237\u7aef"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6d4f\u89c8\u5668\u8f93\u5165",(0,i.jsx)(n.code,{children:"<\u9b54\u4e91\u817e\u4e3b\u673aip>+8096"}),"\u8fdb\u5165jellyfin\u4e3b\u673a\u7aef"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241101112646564.png",alt:"image-20241101112646564"})}),"\n",(0,i.jsx)(n.p,{children:"\u81ea\u884c\u8bbe\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u767b\u5f55"}),"\n",(0,i.jsx)(n.h4,{id:"72-\u8bbe\u7f6e",children:"7.2 \u8bbe\u7f6e"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u8bbe\u7f6e\u4e2d\u542f\u7528RKMPP\u5e76\u53d6\u6d88\u9009\u4e2d\u4e0d\u652f\u6301\u7684\u7f16\u89e3\u7801\u5668"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"C:%5CUsers%5C27907%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20241101112913219.png",alt:"image-20241101112913219"})}),"\n",(0,i.jsxs)(n.p,{children:["==",(0,i.jsx)(n.strong,{children:"\u8bbe\u7f6e\u5b8c\u540e\u8bf7\u5728\u6700\u4e0b\u9762\u4fdd\u5b58"}),"=="]}),"\n",(0,i.jsx)(n.h3,{id:"8-\u5728linux\u4e0a\u9a8c\u8bc1",children:"8 \u5728linux\u4e0a\u9a8c\u8bc1"}),"\n",(0,i.jsx)(n.p,{children:"\u76ee\u524d\u6ca1\u6709\u53ef\u9760\u7684\u65b9\u6cd5\u53ef\u4ee5\u8bfb\u53d6 Rockchip SoC \u4e0a VPU \u7684\u5360\u7528\u60c5\u51b5\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4f46\u60a8\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u8bfb\u53d6\u5176\u4ed6\u5f15\u64ce\u6765\u9a8c\u8bc1\u8fd9\u4e00\u70b9\uff0c\u4f8b\u5982 RGA \uff082D hwaccel blitter\uff09\u3002"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728 Jellyfin Web \u5ba2\u6237\u7aef\u64ad\u653e\u89c6\u9891\uff0c\u901a\u8fc7\u8bbe\u7f6e\u8f83\u4f4e\u7684\u5206\u8fa8\u7387\u6216\u6bd4\u7279\u7387\u89e6\u53d1\u89c6\u9891\u8f6c\u7801\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528",(0,i.jsx)(n.code,{children:"sudo watch -n 1 cat /sys/kernel/debug/rkrga/load"}),"\u547d\u4ee4\u68c0\u67e5 RGA \u5f15\u64ce\u7684\u5360\u7528\u60c5\u51b5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Every 1.0s: cat /sys/kernel/debug/rkrga/load\r\nnum of scheduler = 3\r\n================= load ==================\r\nscheduler[0]: rga3_core0\r\n         load = 42%\r\n-----------------------------------\r\nscheduler[1]: rga3_core1\r\n         load = 27%\r\n-----------------------------------\r\nscheduler[2]: rga2\r\n         load = 0%\r\n-----------------------------------\r\n         process 17: pid = 217002, name: /usr/lib/jellyfin-ffmpeg/ffmpeg ... -init_hw_device rkmpp=rk -hwaccel rkmpp -hwaccel_output_format drm_prime ...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["==\u6d4b\u8bd5\u6b64\u9879\u76ee\u65f6\u4f1a\u4e0b\u8f7dmali\u7684\u5176\u4ed6\u7248\u672c\uff0c\u82e5\u5728\u6b64\u9879\u76ee\u540e\u91cd\u65b0\u8fd0\u884crkllm\u5927\u6a21\u578b\u5219\u4f1a\u5bfc\u81f4\u51fa\u73b0firmware\u56fa\u4ef6\u9519\u8bef\uff0c\u89e3\u51b3\u65b9\u6cd5\u4e3a\u5378\u8f7d\u6b64\u9879\u76ee\u6240\u5b89\u88c5\u7684",(0,i.jsx)(n.code,{children:"libmali-valhall-g610-g13p0-gbm_1.9-1_arm64.deb"}),"\u8f6f\u4ef6\u5e76\u5c06",(0,i.jsx)(n.code,{children:"/lib/firmware"}),"\u4e0b",(0,i.jsx)(n.code,{children:"g610"}),"\u6587\u4ef6\u5939\u4e0b\u56fa\u4ef6\u6587\u4ef6cp\u5230",(0,i.jsx)(n.code,{children:"/lib/firmware"}),"\u4e0b\u540e\u91cd\u65b0\u8fd0\u884c=="]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var i=r(6540);const d={},l=i.createContext(d);function s(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);